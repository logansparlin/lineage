const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-tSLJ_Xrv.js","static/sanity-hgOd0oW6.js","static/LiveQueries-KFjmuPtB.js","static/DisplayedDocumentBroadcaster-B8juUKnX.js","static/PostMessageDocuments-qV5_FHze.js","static/PostMessageRefreshMutations-BGIs10LM.js","static/PostMessagePerspective-DkkrhKVb.js","static/PostMessagePreviewSnapshots-DZ3eg1xV.js","static/PostMessageSchema-CQI6LTVo.js","static/PostMessageTelemetry-BUsab0tL.js"])))=>i.map(i=>d[i]);
import{a3 as Dn,a4 as Un,aW as ot,aX as qn,r as f,aY as Dt,aZ as Fn,j as u,a_ as Vn,a$ as en,b0 as tn,b1 as gt,b2 as Ie,b3 as Xe,b4 as Ne,b5 as Bn,b6 as it,b7 as Hn,b8 as Kn,av as vt,b9 as ct,ba as nn,bb as wt,bc as Gn,bd as Qn,be as yt,bf as Xn,bg as Yn,bh as Jn,bi as Pt,bj as St,bk as Fe,bl as De,bm as _t,bn as jt,bo as $e,bp as Ue,bq as Et,aw as rn,br as Zn,bs as sn,bt as er,bu as tr,b as L,m as ve,bv as ye,l as an,bw as nr,bx as on,u as Be,by as rr,ac as Rt,bz as cn,i as sr,bA as ar,bB as or,bC as ir,Q as cr,bD as ln,bE as lr,bF as Ut,bG as un,bH as dn,a5 as ur,bI as dr,bJ as pr,F as ne,bK as mr,bL as He,bM as pn,bN as mn,bO as st,bP as hr,bQ as fr,bR as gr,bS as vr,bT as yr,J as pe,bU as Ct,bV as Tt,bW as br,bX as hn,bY as qt,bZ as xr,b_ as wr,C as ue,b$ as fn,c0 as Ke,ah as Se,n as Je,T as Q,S as Oe,a2 as Ze,k as et,aj as Ae,c1 as It,c2 as Pr,c3 as Sr,c4 as _r,c5 as jr,I as Er,q as de,a as Rr,c6 as at,c7 as Cr,c8 as Tr,G as Ir,c9 as qe,ca as gn,cb as kr,cc as Ar,x as Mr,cd as $r,z as Or,ce as Lr,cf as vn,cg as yn,ch as zr,ci as Wr,al as Nr,cj as Dr,ck as Ur,cl as qr,aM as Fr,A as Vr,cm as Br,t as Hr,cn as bn,co as kt,cp as Kr,aq as xn,cq as Gr,a6 as wn,aN as Pn,au as Qr,cr as Xr,cs as Yr,ct as Jr,cu as Zr,cv as es,cw as ts,cx as ns,cy as rs}from"./sanity-hgOd0oW6.js";import{i as ss,D as as}from"./DisplayedDocumentBroadcaster-B8juUKnX.js";function os(n,e){return e===void 0&&(e=null),e=e??n,Dn(function(t,s){var r=[],a=0;t.subscribe(Un(s,function(o){var i,l,c,p,d=null;a++%e===0&&r.push([]);try{for(var h=ot(r),m=h.next();!m.done;m=h.next()){var g=m.value;g.push(o),n<=g.length&&(d=d??[],d.push(g))}}catch(y){i={error:y}}finally{try{m&&!m.done&&(l=h.return)&&l.call(h)}finally{if(i)throw i.error}}if(d)try{for(var b=ot(d),v=b.next();!v.done;v=b.next()){var g=v.value;qn(r,g),s.next(g)}}catch(y){c={error:y}}finally{try{v&&!v.done&&(p=b.return)&&p.call(b)}finally{if(c)throw c.error}}},function(){var o,i;try{for(var l=ot(r),c=l.next();!c.done;c=l.next()){var p=c.value;s.next(p)}}catch(d){o={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}s.complete()},void 0,function(){r=null}))})}function is({children:n,isValidProp:e,...t}){e&&Vn(e),t={...f.useContext(Dt),...t},t.isStatic=Fn(()=>t.isStatic);const s=f.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return u.jsx(Dt.Provider,{value:s,children:n})}const te=[];for(let n=0;n<256;++n)te.push((n+256).toString(16).slice(1));function cs(n,e=0){return(te[n[e+0]]+te[n[e+1]]+te[n[e+2]]+te[n[e+3]]+"-"+te[n[e+4]]+te[n[e+5]]+"-"+te[n[e+6]]+te[n[e+7]]+"-"+te[n[e+8]]+te[n[e+9]]+"-"+te[n[e+10]]+te[n[e+11]]+te[n[e+12]]+te[n[e+13]]+te[n[e+14]]+te[n[e+15]]).toLowerCase()}let lt;const ls=new Uint8Array(16);function us(){if(!lt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");lt=crypto.getRandomValues.bind(crypto)}return lt(ls)}const ds=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ft={randomUUID:ds};function We(n,e,t){var r;if(Ft.randomUUID&&!n)return Ft.randomUUID();n=n||{};const s=n.random??((r=n.rng)==null?void 0:r.call(n))??us();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,cs(s)}const Vt=n=>({context:e})=>{const{count:t,include:s,exclude:r,responseType:a="message.received"}=n;return{count:t,domain:e.domain,from:e.connectTo,include:s?Array.isArray(s)?s:[s]:[],exclude:r?Array.isArray(r)?r:[r]:[],responseType:a,target:e.target,to:e.name}},ps=n=>e=>{const{data:t}=e;return(n.include.length?n.include.includes(t.type):!0)&&(n.exclude.length?!n.exclude.includes(t.type):!0)&&t.domain===n.domain&&t.from===n.from&&t.to===n.to&&(!n.target||e.source===n.target)},ms=n=>e=>({type:n,message:e}),hs=Kn(()=>yt(window,"message")),Sn=n=>tn(({input:e})=>hs.pipe(n?vt(n):ct(),nn(ps(e)),vt(ms(e.responseType)),e.count?ct(os(e.count),Gn(t=>t),wt(e.count)):ct())),At="sanity/comlink",fs=3e3,gs=500,Ve="comlink/response",tt="comlink/heartbeat",Mt="comlink/disconnect",$t="comlink/handshake/syn",Ot="comlink/handshake/syn-ack",Lt="comlink/handshake/ack",vs=n=>e=>e.pipe(wt(1),vt(()=>{throw new Error(n)})),_n=()=>en({actors:{listen:tn(({input:n})=>{const e=n.signal?yt(n.signal,"abort").pipe(vs(`Request ${n.requestId} aborted`)):Xn,t=s=>{var r,a;return((r=s.data)==null?void 0:r.type)===Ve&&((a=s.data)==null?void 0:a.responseTo)===n.requestId&&!!s.source&&n.sources.has(s.source)};return yt(window,"message").pipe(nn(t),wt(n.sources.size),Yn(e))})},actions:{"send message":({context:n},e)=>{const{sources:t,targetOrigin:s}=n,{message:r}=e;t.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},"on success":it(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return n.response&&((t=n.resolvable)==null||t.resolve(n.response)),{type:"request.success",requestId:e.id,response:n.response,responseTo:n.responseTo}}),"on fail":it(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return n.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${n.type}' on client '${n.from}' (ID: '${n.id}').`),(t=n.resolvable)==null||t.reject(new Error("No response received")),{type:"request.failed",requestId:e.id}}),"on abort":it(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return(t=n.resolvable)==null||t.reject(new Error("Request aborted")),{type:"request.aborted",requestId:e.id}})},guards:{expectsResponse:({context:n})=>n.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:n})=>n.responseTimeout??fs}}).createMachine({context:({input:n})=>({channelId:n.channelId,data:n.data,domain:n.domain,expectResponse:n.expectResponse??!1,from:n.from,id:`msg-${We()}`,parentRef:n.parentRef,resolvable:n.resolvable,response:null,responseTimeout:n.responseTimeout,responseTo:n.responseTo,signal:n.signal,sources:n.sources instanceof Set?n.sources:new Set([n.sources]),suppressWarnings:n.suppressWarnings,targetOrigin:n.targetOrigin,to:n.to,type:n.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:n})=>{const{channelId:e,data:t,domain:s,from:r,id:a,responseTo:o,to:i,type:l}=n;return{message:{channelId:e,data:t,domain:s,from:r,id:a,to:i,type:l,responseTo:o}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:n})=>({requestId:n.id,sources:n.sources,signal:n.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:gt({response:({event:n})=>n.data.data,responseTo:({event:n})=>n.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:n,self:e})=>({requestId:e.id,response:n.response,responseTo:n.responseTo})}),ys=Jn(({sendBack:n,input:e})=>{const t=()=>{n(e.event)};e.immediate&&t();const s=setInterval(t,e.interval);return()=>{clearInterval(s)}}),nt=()=>en({actors:{requestMachine:_n(),listen:Sn(),sendBackAtInterval:ys},actions:{"buffer message":Xe(({enqueue:n})=>{n.assign({buffer:({event:e,context:t})=>(Ie(e,"post"),[...t.buffer,e.data])}),n.emit(({event:e})=>(Ie(e,"post"),{type:"buffer.added",message:e.data}))}),"create request":gt({requests:({context:n,event:e,self:t,spawn:s})=>{Ie(e,"request");const r=(Array.isArray(e.data)?e.data:[e.data]).map(a=>{const o=`req-${We()}`;return s("requestMachine",{id:o,input:{channelId:n.channelId,data:a.data,domain:n.domain,expectResponse:a.expectResponse,from:n.name,parentRef:t,responseTo:a.responseTo,sources:n.target,targetOrigin:n.targetOrigin,to:n.connectTo,type:a.type}})});return[...n.requests,...r]}}),"emit received message":Xe(({enqueue:n})=>{n.emit(({event:e})=>(Ie(e,"message.received"),{type:"message",message:e.message.data}))}),"emit status":Bn((n,e)=>({type:"status",status:e.status})),"post message":Ne(({event:n})=>(Ie(n,"post"),{type:"request",data:{data:n.data.data,expectResponse:!0,type:n.data.type}})),"remove request":Xe(({context:n,enqueue:e,event:t})=>{Ie(t,["request.success","request.failed","request.aborted"]),Qn(t.requestId),e.assign({requests:n.requests.filter(({id:s})=>s!==t.requestId)})}),respond:Ne(({event:n})=>(Ie(n,"response"),{type:"request",data:{data:n.data,type:Ve,responseTo:n.respondTo}})),"send handshake ack":Ne({type:"request",data:{type:Lt}}),"send disconnect":Ne(()=>({type:"request",data:{type:Mt}})),"send handshake syn":Ne({type:"request",data:{type:$t}}),"send pending messages":Xe(({enqueue:n})=>{n.raise(({context:e})=>({type:"request",data:e.buffer.map(({data:t,type:s})=>({data:t,type:s}))})),n.emit(({context:e})=>({type:"buffer.flushed",messages:e.buffer})),n.assign({buffer:[]})}),"set target":gt({target:({event:n})=>(Ie(n,"target.set"),n.target)})},guards:{"has target":({context:n})=>!!n.target,"should send heartbeats":({context:n})=>n.heartbeat}}).createMachine({id:"connection",context:({input:n})=>({id:n.id||`${n.name}-${We()}`,buffer:[],channelId:`chn-${We()}`,connectTo:n.connectTo,domain:n.domain??At,heartbeat:n.heartbeat??!1,name:n.name,requests:[],target:n.target,targetOrigin:n.targetOrigin}),on:{"target.set":{actions:"set target"},"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{connect:{target:"handshaking",guard:"has target"},post:{actions:"buffer message"}}},handshaking:{id:"handshaking",entry:[{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"send syn",src:"sendBackAtInterval",input:()=>({event:{type:"syn"},interval:gs,immediate:!0})},{id:"listen for handshake",src:"listen",input:n=>Vt({include:Ot,count:1})(n)}],on:{syn:{actions:"send handshake syn"},request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{target:"connected"},disconnect:{target:"disconnected"}},exit:"send handshake ack"},connected:{entry:["send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:{id:"listen for messages",src:"listen",input:Vt({exclude:[Ve,tt]})},on:{post:{actions:"post message"},request:{actions:"create request"},response:{actions:"respond"},"message.received":{actions:"emit received message"},disconnect:{target:"disconnected"}},initial:"heartbeat",states:{heartbeat:{initial:"checking",states:{checking:{always:{guard:"should send heartbeats",target:"sending"}},sending:{on:{"request.failed":{target:"#handshaking"}},invoke:{id:"send heartbeat",src:"sendBackAtInterval",input:()=>({event:{type:"post",data:{type:tt,data:void 0}},interval:2e3,immediate:!1})}}}}}},disconnected:{id:"disconnected",entry:["send disconnect",{type:"emit status",params:{status:"disconnected"}}],on:{request:{actions:"create request"},post:{actions:"buffer message"},connect:{target:"handshaking",guard:"has target"}}}}}),ut=(n,e=nt())=>{const t=n.id||`${n.name}-${We()}`,s=Hn(e,{input:{...n,id:t}}),r=new Map,a=new Map,o=(g,b,v)=>{const y=r.get(g)||new Set;r.has(g)||r.set(g,y),y.add(b);const x=a.get(g);if(x){const _=(v==null?void 0:v.replay)??1;Array.from(x).slice(-_).forEach(async({data:w,id:E})=>{const C=await b(w);C&&s.send({type:"response",respondTo:E,data:C})}),a.delete(g)}return()=>{y.delete(b)}},i=()=>{s.send({type:"connect"})},l=()=>{s.send({type:"disconnect"})},c=(g,b)=>{const{unsubscribe:v}=s.on("status",y=>{b&&y.status!==b||g(y.status)});return v},p=g=>{s.send({type:"target.set",target:g})},d=(g,b)=>{const v={type:g,data:b};s.send({type:"post",data:v})};s.on("message",async({message:g})=>{const b=r.get(g.type);if(b){b.forEach(async y=>{const x=await y(g.data);x&&s.send({type:"response",respondTo:g.id,data:x})});return}const v=a.get(g.type);v?v.add(g):a.set(g.type,new Set([g]))});const h=()=>{s.stop()},m=()=>(s.start(),h);return{actor:s,connect:i,disconnect:l,id:t,name:n.name,machine:e,on:o,onStatus:c,post:d,setTarget:p,start:m,stop:h,get target(){return s.getSnapshot().context.target}}},dt=n=>{n.disconnect(),setTimeout(()=>{n.stop()},0)},bs=()=>{},xs=n=>{const{targetOrigin:e}=n,t=new Set,s=new Set;return{addTarget:r=>{if(t.has(r))return bs;if(!t.size||!s.size)return t.add(r),s.forEach(o=>{o.connections.forEach(i=>{i.setTarget(r),i.connect()})}),()=>{t.delete(r),s.forEach(o=>{o.connections.forEach(i=>{i.target===r&&i.disconnect()})})};t.add(r);const a=new Set;return s.forEach(o=>{const i=ut({...o.input,target:r,targetOrigin:e},o.machine);a.add(i),o.connections.add(i),o.subscribers.forEach(({type:l,handler:c,unsubscribers:p})=>{p.push(i.on(l,c))}),o.internalEventSubscribers.forEach(({type:l,handler:c,unsubscribers:p})=>{p.push(i.actor.on(l,c).unsubscribe)}),o.statusSubscribers.forEach(({handler:l,unsubscribers:c})=>{c.push(i.onStatus(p=>l({connection:i.id,status:p})))}),i.start(),i.connect()}),()=>{t.delete(r),a.forEach(o=>{dt(o),s.forEach(i=>{i.connections.delete(o)})})}},createChannel:(r,a=nt())=>{const o={connections:new Set,input:r,internalEventSubscribers:new Set,machine:a,statusSubscribers:new Set,subscribers:new Set};s.add(o);const{connections:i,internalEventSubscribers:l,statusSubscribers:c,subscribers:p}=o;if(t.size)t.forEach(v=>{const y=ut({...r,target:v,targetOrigin:e},a);i.add(y)});else{const v=ut({...r,targetOrigin:e},a);i.add(v)}const d=(...v)=>{const[y,x]=v;i.forEach(_=>{_.post(y,x)})},h=(v,y)=>{const x=[];i.forEach(w=>{x.push(w.on(v,y))});const _={type:v,handler:y,unsubscribers:x};return p.add(_),()=>{x.forEach(w=>w()),p.delete(_)}},m=(v,y)=>{const x=[];i.forEach(w=>{x.push(w.actor.on(v,y).unsubscribe)});const _={type:v,handler:y,unsubscribers:x};return l.add(_),()=>{x.forEach(w=>w()),l.delete(_)}},g=v=>{const y=[];i.forEach(_=>{y.push(_.onStatus(w=>v({connection:_.id,status:w})))});const x={handler:v,unsubscribers:y};return c.add(x),()=>{y.forEach(_=>_()),c.delete(x)}},b=()=>{const v=o.connections;v.forEach(dt),v.clear(),s.delete(o)};return{on:h,onInternalEvent:m,onStatus:g,post:d,start:()=>(i.forEach(v=>{v.start(),v.connect()}),b),stop:b}},destroy:()=>{s.forEach(({connections:r})=>{r.forEach(dt),r.clear()}),s.clear(),t.clear()}}},ws={"handshake/syn":$t,"handshake/syn-ack":Ot,"handshake/ack":Lt,"channel/response":Ve,"channel/heartbeat":tt,"channel/disconnect":Mt,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},Ps={[$t]:"handshake/syn",[Ot]:"handshake/syn-ack",[Lt]:"handshake/ack",[Ve]:"channel/response",[tt]:"channel/heartbeat",[Mt]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},Ss=n=>{const{data:e}=n;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=At),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=ws[e.type]??e.type),n},_s=n=>{const{channelId:e,...t}=n,s={...t,connectionId:e};return s.domain===At&&(s.domain="sanity/channels"),s.to==="visual-editing"&&(s.to="overlays"),s.from==="visual-editing"&&(s.from="overlays"),s.type=Ps[s.type]??s.type,s.type==="channel/response"&&s.responseTo&&!s.data&&(s.data={responseTo:s.responseTo}),(s.type==="handshake/syn"||s.type==="handshake/syn-ack"||s.type==="handshake/ack")&&(s.data={id:s.connectionId}),s},js=({context:n},e)=>{const{sources:t,targetOrigin:s}=n,r=_s(e.message);t.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},Bt=()=>({listen:Sn(Ss),requestMachine:_n().provide({actions:{"send message":js}})});function Es(n){const e=new URL(n),{searchParams:t}=e;return t.delete(Pt),t.delete(St),t.delete(Fe),t.delete(De),t.delete(_t),e}function Rs(n,e,t,s){const r=new URL(n),{searchParams:a}=r;return e&&(a.set(St,e),a.set(Pt,t)),a.set(Fe,s),r}function jn(){if(typeof crypto<"u"){const n=new Uint8Array(16);crypto.getRandomValues(n);let e="";for(let t=0;t<n.length;t++)e+=n[t].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function Cs(n,e,t,s){const r=n.withConfig({apiVersion:jt}),a=jn(),o=r.patch($e).set({secret:a,studioUrl:t,userId:s});return await r.transaction().createIfNotExists({_id:$e,_type:Ue,source:e,studioUrl:t,userId:s}).patch(o).commit({tag:Et}),{secret:a}}async function Ts(n,e,t,s){const r=n.withConfig({apiVersion:jt}),a=r.patch($e).set({secret:null,studioUrl:t,userId:s});await r.transaction().createIfNotExists({_id:$e,_type:Ue,source:e,studioUrl:t,userId:s}).patch(a).commit({tag:Et})}function Is(n){for(var e=[],t=0;t<n.length;){var s=n[t];if(s==="*"||s==="+"||s==="?"){e.push({type:"MODIFIER",index:t,value:n[t++]});continue}if(s==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:n[t++]});continue}if(s==="{"){e.push({type:"OPEN",index:t,value:n[t++]});continue}if(s==="}"){e.push({type:"CLOSE",index:t,value:n[t++]});continue}if(s===":"){for(var r="",a=t+1;a<n.length;){var o=n.charCodeAt(a);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){r+=n[a++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:r}),t=a;continue}if(s==="("){var i=1,l="",a=t+1;if(n[a]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<n.length;){if(n[a]==="\\"){l+=n[a++]+n[a++];continue}if(n[a]===")"){if(i--,i===0){a++;break}}else if(n[a]==="("&&(i++,n[a+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(a));l+=n[a++]}if(i)throw new TypeError("Unbalanced pattern at ".concat(t));if(!l)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:l}),t=a;continue}e.push({type:"CHAR",index:t,value:n[t++]})}return e.push({type:"END",index:t,value:""}),e}function ks(n,e){e===void 0&&(e={});for(var t=Is(n),s=e.prefixes,r=s===void 0?"./":s,a=e.delimiter,o=a===void 0?"/#?":a,i=[],l=0,c=0,p="",d=function(P){if(c<t.length&&t[c].type===P)return t[c++].value},h=function(P){var j=d(P);if(j!==void 0)return j;var T=t[c],A=T.type,k=T.index;throw new TypeError("Unexpected ".concat(A," at ").concat(k,", expected ").concat(P))},m=function(){for(var P="",j;j=d("CHAR")||d("ESCAPED_CHAR");)P+=j;return P},g=function(P){for(var j=0,T=o;j<T.length;j++){var A=T[j];if(P.indexOf(A)>-1)return!0}return!1},b=function(P){var j=i[i.length-1],T=P||(j&&typeof j=="string"?j:"");if(j&&!T)throw new TypeError('Must have text between two parameters, missing text after "'.concat(j.name,'"'));return!T||g(T)?"[^".concat(ke(o),"]+?"):"(?:(?!".concat(ke(T),")[^").concat(ke(o),"])+?")};c<t.length;){var v=d("CHAR"),y=d("NAME"),x=d("PATTERN");if(y||x){var _=v||"";r.indexOf(_)===-1&&(p+=_,_=""),p&&(i.push(p),p=""),i.push({name:y||l++,prefix:_,suffix:"",pattern:x||b(_),modifier:d("MODIFIER")||""});continue}var w=v||d("ESCAPED_CHAR");if(w){p+=w;continue}p&&(i.push(p),p="");var E=d("OPEN");if(E){var _=m(),C=d("NAME")||"",S=d("PATTERN")||"",I=m();h("CLOSE"),i.push({name:C||(S?l++:""),pattern:C&&!S?b(_):S,prefix:_,suffix:I,modifier:d("MODIFIER")||""});continue}h("END")}return i}function As(n,e){var t=[],s=Rn(n,t,e);return Ms(s,t,e)}function Ms(n,e,t){t===void 0&&(t={});var s=t.decode,r=s===void 0?function(a){return a}:s;return function(a){var o=n.exec(a);if(!o)return!1;for(var i=o[0],l=o.index,c=Object.create(null),p=function(h){if(o[h]===void 0)return"continue";var m=e[h-1];m.modifier==="*"||m.modifier==="+"?c[m.name]=o[h].split(m.prefix+m.suffix).map(function(g){return r(g,m)}):c[m.name]=r(o[h],m)},d=1;d<o.length;d++)p(d);return{path:i,index:l,params:c}}}function ke(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function En(n){return n&&n.sensitive?"":"i"}function $s(n,e){if(!e)return n;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,r=t.exec(n.source);r;)e.push({name:r[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),r=t.exec(n.source);return n}function Os(n,e,t){var s=n.map(function(r){return Rn(r,e,t).source});return new RegExp("(?:".concat(s.join("|"),")"),En(t))}function Ls(n,e,t){return zs(ks(n,t),e,t)}function zs(n,e,t){t===void 0&&(t={});for(var s=t.strict,r=s===void 0?!1:s,a=t.start,o=a===void 0?!0:a,i=t.end,l=i===void 0?!0:i,c=t.encode,p=c===void 0?function(j){return j}:c,d=t.delimiter,h=d===void 0?"/#?":d,m=t.endsWith,g=m===void 0?"":m,b="[".concat(ke(g),"]|$"),v="[".concat(ke(h),"]"),y=o?"^":"",x=0,_=n;x<_.length;x++){var w=_[x];if(typeof w=="string")y+=ke(p(w));else{var E=ke(p(w.prefix)),C=ke(p(w.suffix));if(w.pattern)if(e&&e.push(w),E||C)if(w.modifier==="+"||w.modifier==="*"){var S=w.modifier==="*"?"?":"";y+="(?:".concat(E,"((?:").concat(w.pattern,")(?:").concat(C).concat(E,"(?:").concat(w.pattern,"))*)").concat(C,")").concat(S)}else y+="(?:".concat(E,"(").concat(w.pattern,")").concat(C,")").concat(w.modifier);else{if(w.modifier==="+"||w.modifier==="*")throw new TypeError('Can not repeat "'.concat(w.name,'" without a prefix and suffix'));y+="(".concat(w.pattern,")").concat(w.modifier)}else y+="(?:".concat(E).concat(C,")").concat(w.modifier)}}if(l)r||(y+="".concat(v,"?")),y+=t.endsWith?"(?=".concat(b,")"):"$";else{var I=n[n.length-1],P=typeof I=="string"?v.indexOf(I[I.length-1])>-1:I===void 0;r||(y+="(?:".concat(v,"(?=").concat(b,"))?")),P||(y+="(?=".concat(v,"|").concat(b,")"))}return new RegExp(y,En(t))}function Rn(n,e,t){return n instanceof RegExp?$s(n,e):Array.isArray(n)?Os(n,e,t):Ls(n,e,t)}async function Ws(n,e,t,s,r=rn()){const a=n.withConfig({apiVersion:jt});try{const o=new Date(Date.now()+1e3*Zn),i=`drafts.${r}`,l=jn(),c=a.patch(i).set({secret:l,source:e,studioUrl:t,userId:s});return await a.transaction().createOrReplace({_id:i,_type:sn}).patch(c).commit({tag:Et}),{secret:l,expiresAt:o}}finally{try{await a.delete({query:er})}catch(o){console.error("Failed to delete expired secrets",o)}}}function Ns(n){const{draftMode:e,previewMode:t,origin:s=typeof location>"u"?"https://localhost":location.origin}=n,r=(t==null?void 0:t.enable)||(e==null?void 0:e.enable);let{preview:a="/"}=n;const o=new URL(a,s),i=r?new URL(r,s):void 0;return async l=>{try{if(l.previewSearchParam){const p=new URL(l.previewSearchParam,o);p.origin===o.origin&&(a=`${p.pathname}${p.search}`)}}catch{}typeof location<"u"&&location.origin===o.origin&&l.studioBasePath&&(a.startsWith(`${l.studioBasePath}/`)||a===l.studioBasePath)&&(a=n.preview||"/");const c=new URL(a,o);if(i){const p=new URL(i),{searchParams:d}=p;return d.set(St,l.previewUrlSecret),d.set(Fe,l.studioPreviewPerspective),c.pathname!==p.pathname&&d.set(Pt,`${c.pathname}${c.search}`),p.toString()}return c.toString()}}function Ds(n,e){let t=new AbortController,s=[];async function r(o,i){const{result:l,syncTags:c}=await n.fetch(tr,{},{filterResponse:!1,lastLiveEventId:o,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(c)&&(s=c),i.aborted||e(l)}const a=n.live.events().subscribe({next:o=>{o.type==="message"&&(t.abort(),t=new AbortController,o.tags.some(i=>s.includes(i))&&r(o.id,t.signal))},error:o=>console.error(o)});return r(null,t.signal),()=>{a.unsubscribe(),t.abort()}}const Us=n=>{const e=L.c(3),{comlink:t}=n;let s,r;return e[0]!==t?(s=()=>t.on("visual-editing/features",Fs),r=[t],e[0]=t,e[1]=s,e[2]=r):(s=e[1],r=e[2]),f.useEffect(s,r),null};var qs=f.memo(Us);function Fs(){return{features:{optimistic:!0}}}function Cn(n,e){let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>{n.apply(n,s)},e)}}const Vs=function(n){const e=L.c(14),{comlink:t,children:s}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={},e[0]=r):r=e[0];const a=f.useRef(r);let o,i;e[1]!==t?(o=()=>t==null?void 0:t.on("visual-editing/shared-state",()=>({state:a.current})),i=[t],e[1]=t,e[2]=o,e[3]=i):(o=e[2],i=e[3]),f.useEffect(o,i);let l;e[4]!==t?(l=(v,y)=>{a.current[v]=y,t==null||t.post("presentation/shared-state",{key:v,value:y})},e[4]=t,e[5]=l):l=e[5];const c=l;let p;e[6]!==t?(p=v=>{t==null||t.post("presentation/shared-state",{key:v}),delete a.current[v]},e[6]=t,e[7]=p):p=e[7];const d=p;let h,m;e[8]!==d||e[9]!==c?(m={removeValue:d,setValue:c},e[8]=d,e[9]=c,e[10]=m):m=e[10],h=m;const g=h;let b;return e[11]!==s||e[12]!==g?(b=u.jsx(yr.Provider,{value:g,children:s}),e[11]=s,e[12]=g,e[13]=b):b=e[13],b},Bs=pe.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,zt=function(n){const e=L.c(15),{children:t,defaultSize:s,id:r,minWidth:a,maxWidth:o,order:i}=n,l=s===void 0?null:s,c=i===void 0?0:i,p=f.useContext(Ct);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:d,registerElement:h,unregisterElement:m}=p;let g;e[0]!==d||e[1]!==r?(g=d(r),e[0]=d,e[1]=r,e[2]=g):g=e[2];const b=g;let v,y;e[3]!==l||e[4]!==r||e[5]!==o||e[6]!==a||e[7]!==c||e[8]!==h||e[9]!==m?(v=()=>(h(r,{id:r,type:"panel",defaultSize:l,maxWidth:o??null,minWidth:a??0,order:c}),()=>{m(r)}),y=[r,l,c,o,a,h,m],e[3]=l,e[4]=r,e[5]=o,e[6]=a,e[7]=c,e[8]=h,e[9]=m,e[10]=v,e[11]=y):(v=e[10],y=e[11]),f.useLayoutEffect(v,y);let x;return e[12]!==t||e[13]!==b?(x=u.jsx(Bs,{style:b,children:t}),e[12]=t,e[13]=b,e[14]=x):x=e[14],x},Tn="presentation/panels",In=()=>JSON.parse(localStorage.getItem(Tn)||"{}"),Hs=n=>{localStorage.setItem(Tn,JSON.stringify(n))},kn=n=>n.map(e=>[e.id,e.order].join(":")).join(",");function Ks(){const n=L.c(1);let e;const t=Qs,s=Gs;let r;if(n[0]===Symbol.for("react.memo_cache_sentinel")){const a=Cn(s,100);r={get:t,set:s,setDebounced:a},n[0]=r}else r=n[0];return e=r,e}function Gs(n,e){const t=In(),s=kn(n),r={...t,[s]:e};Hs(r)}function Qs(n){const e=In(),t=kn(n);return Array.isArray(e[t])&&e[t].some(Xs)?void 0:e[t]}function Xs(n){return n===null}function bt(n,e,t){const{maxWidth:s,minWidth:r}=n,a=s==null?100:s/t*100,o=r/t*100;return Math.min(a,Math.max(o,e))}function Ys(n,e,t,s,r,a){const{panels:o,widths:i}=r,{widths:l}=a,c=l||i,p=[...c];{const g=n<0?s:t,b=o.findIndex(x=>x.id===g.id),v=c[b],y=bt(g,v+Math.abs(n),e);if(v===y)return c;n=n<0?v-y:y-v}let d=0,h=n<0?t:s,m=o.findIndex(g=>g.id===h.id);for(;;){const g=o[m],b=c[m],v=Math.abs(n)-Math.abs(d),y=bt(g,b-v,e);if(b!==y&&(d+=b-y,p[m]=y,d.toPrecision(10).localeCompare(Math.abs(n).toPrecision(10),void 0,{numeric:!0})>=0))break;if(n<0){if(--m<0)break}else if(++m>=o.length)break}return d===0?c:(h=n<0?s:t,m=o.findIndex(g=>g.id===h.id),p[m]=c[m]+d,p)}function Js(n,e,t){if(n.length===1)return"100";const s=n.findIndex(a=>a.id===e),r=t[s];return r==null?"0":r.toPrecision(10)}function Ht(n,e,t=0,s=null){const r=n.clientX,a=(s||e.getBoundingClientRect()).left;return r-a-t}function pt(n){return n.type==="panel"}function Kt(n){return n.type==="resizer"}function Gt(n){return Array.from(n.values()).sort(({order:e},{order:t})=>e==null&&t==null?0:e==null?-1:t==null?1:e-t)}function Qt(n,e,t){const s=e.reduce((o,i)=>o+i,0),r=[...e].map(o=>o/s*100);let a=0;for(let o=0;o<n.length;o++){const i=n[o],l=r[o],c=bt(i,l,t);l!=c&&(a+=l-c,r[o]=c)}if(a.toFixed(3)!=="0.000")for(let o=0;o<n.length;o++){const i=n[o];let{maxWidth:l,minWidth:c}=i;c=c/t*100,l!=null&&(l=l/t*100);const p=Math.min(l??100,Math.max(c,r[o]+a));if(p!==r[o]&&(a-=p-r[o],r[o]=p,Math.abs(a).toFixed(3)==="0.000"))break}return r}function Zs(n){let e=n.length,t=100;const s=n.map(a=>a.defaultSize?(t-=a.defaultSize,e-=1,a.defaultSize):null),r=t/e;return s.map(a=>a===null?r:a)}const ea=pe.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,ta=function(n){const e=L.c(46),{children:t}=n,s=f.useRef(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,e[0]=r):r=e[0];const[a,o]=f.useState(r);let i,l;e[1]!==a?(l=Gt(a).filter(pt),e[1]=a,e[2]=l):l=e[2],i=l;const c=i;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3];const[d,h]=f.useState(p),[m,g]=f.useState(null);let b;e[4]!==a||e[5]!==c||e[6]!==d?(b={elements:a,panels:c,widths:d},e[4]=a,e[5]=c,e[6]=d,e[7]=b):b=e[7];const v=f.useRef(b);let y;e[8]!==m||e[9]!==c||e[10]!==d?(y=B=>({flexGrow:Js(c,B,d),pointerEvents:m===null?void 0:"none"}),e[8]=m,e[9]=c,e[10]=d,e[11]=y):y=e[11];const x=y;let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=(B,F)=>{o(H=>{if(H.has(B))return H;const K=new Map(H);return K.set(B,F),K})},e[12]=_):_=e[12];const w=_;let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E=B=>{o(F=>{if(!F.has(B))return F;const H=new Map(F);return H.delete(B),H})},e[13]=E):E=e[13];const C=E;let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=S):S=e[14];const I=f.useRef(S);let P;e[15]!==a?(P=(B,F)=>{const H=Gt(a),K=H.findIndex(ee=>ee.id===B),se=a.get(B);if(!se||!Kt(se))return;const G=se.el.current;G&&(I.current={resizerIndex:K,panelBefore:H.reduce((ee,J,ae)=>pt(J)&&ae<K?J:ee,null),panelAfter:H.reduce((ee,J,ae)=>ee===null&&pt(J)&&ae>K?J:ee,null),containerWidth:window.innerWidth,startX:F.pageX,dragOffset:Ht(F,G),resizerRect:G.getBoundingClientRect(),widths:v.current.widths},g(B))},e[15]=a,e[16]=P):P=e[16];const j=P;let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{g(null)},e[17]=T):T=e[17];const A=T;let k;e[18]!==a?(k=(B,F)=>{F.preventDefault(),F.stopPropagation();const{containerWidth:H,dragOffset:K,panelBefore:se,panelAfter:G,resizerRect:ee}=I.current;if(se==null||G==null)return;const J=a.get(B);if(!J||!Kt(J))return;const ae=J.el.current;if(!ae)return;const oe=Ht(F,ae,K,ee);if(oe===0)return;const{widths:he}=v.current,fe=s.current.getBoundingClientRect(),_e=oe/fe.width*100,me=Ys(_e,H,se,G,v.current,I.current);he.some((je,ge)=>je!==me[ge])&&h(me)},e[18]=a,e[19]=k):k=e[19];const R=k;let M,N;e[20]!==a||e[21]!==c||e[22]!==d?(M=()=>{v.current.elements=a,v.current.panels=c,v.current.widths=d},N=[a,c,d],e[20]=a,e[21]=c,e[22]=d,e[23]=M,e[24]=N):(M=e[23],N=e[24]),f.useLayoutEffect(M,N);const O=Ks();let z,D;e[25]!==c||e[26]!==O?(z=()=>{const{widths:B}=v.current;if(B.length===c.length)return;const F=O.get(c);if(F){const K=Qt(c,F,window.innerWidth);h(K);return}const H=Zs(c);h(H)},D=[O,c],e[25]=c,e[26]=O,e[27]=z,e[28]=D):(z=e[27],D=e[28]),f.useLayoutEffect(z,D);let X,V;e[29]!==c||e[30]!==O||e[31]!==d?(X=()=>{d.length&&O.setDebounced(c,d)},V=[O,c,d],e[29]=c,e[30]=O,e[31]=d,e[32]=X,e[33]=V):(X=e[32],V=e[33]),f.useEffect(X,V);let Y,re;e[34]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{const B=new ResizeObserver(()=>{const{panels:F,widths:H}=v.current,K=Qt(F,H,window.innerWidth);H.some((se,G)=>se!==K[G])&&h(K)});return B.observe(s.current),()=>{B.disconnect()}},re=[],e[34]=Y,e[35]=re):(Y=e[34],re=e[35]),f.useLayoutEffect(Y,re);let ie,W;e[36]!==m||e[37]!==R||e[38]!==x||e[39]!==j?(W={activeResizer:m,drag:R,getPanelStyle:x,registerElement:w,startDragging:j,stopDragging:A,unregisterElement:C},e[36]=m,e[37]=R,e[38]=x,e[39]=j,e[40]=W):W=e[40],ie=W;const Z=ie;let ce;e[41]!==t?(ce=u.jsx(ea,{ref:s,children:t}),e[41]=t,e[42]=ce):ce=e[42];let le;return e[43]!==Z||e[44]!==ce?(le=u.jsx(Ct.Provider,{value:Z,children:ce}),e[43]=Z,e[44]=ce,e[45]=le):le=e[45],le};function Wt(n){const e=L.c(37);let t,s,r,a,o;e[0]!==n?({children:t,message:s,onRetry:a,onContinueAnyway:r,...o}=n,e[0]=n,e[1]=t,e[2]=s,e[3]=r,e[4]=a,e[5]=o):(t=e[1],s=e[2],r=e[3],a=e[4],o=e[5]);const{t:i}=ve(ye);let l;e[6]!==i?(l=i("error-card.retry-button.text"),e[6]=i,e[7]=l):l=e[7];let c;e[8]!==a||e[9]!==l?(c=u.jsx(Se,{mode:"ghost",onClick:a,text:l}),e[8]=a,e[9]=l,e[10]=c):c=e[10];const p=c;let d;e[11]!==i?(d=i("error-card.continue-button.text"),e[11]=i,e[12]=d):d=e[12];let h;e[13]!==r||e[14]!==d?(h=u.jsx(Se,{mode:"ghost",tone:"critical",onClick:r,text:d}),e[13]=r,e[14]=d,e[15]=h):h=e[15];const m=h;let g;e[16]!==i?(g=i("error-card.title"),e[16]=i,e[17]=g):g=e[17];let b;e[18]!==g?(b=u.jsx(Q,{size:1,weight:"semibold",children:g}),e[18]=g,e[19]=b):b=e[19];let v;e[20]!==s?(v=u.jsx(Q,{muted:!0,size:1,children:s}),e[20]=s,e[21]=v):v=e[21];let y;e[22]!==b||e[23]!==v?(y=u.jsxs(Oe,{space:3,children:[b,v]}),e[22]=b,e[23]=v,e[24]=y):y=e[24];let x;e[25]!==m||e[26]!==r||e[27]!==a||e[28]!==p?(x=a&&r?u.jsxs(Er,{space:2,children:[p,m]}):a?u.jsx(de,{children:p}):r?u.jsx(de,{children:m}):null,e[25]=m,e[26]=r,e[27]=a,e[28]=p,e[29]=x):x=e[29];let _;e[30]!==t||e[31]!==y||e[32]!==x?(_=u.jsx(ne,{align:"center",height:"fill",justify:"center",children:u.jsx(Rr,{padding:4,sizing:"border",width:0,children:u.jsxs(Oe,{space:4,children:[y,t,x]})})}),e[30]=t,e[31]=y,e[32]=x,e[33]=_):_=e[33];let w;return e[34]!==o||e[35]!==_?(w=u.jsx(ue,{height:"fill",...o,children:_}),e[34]=o,e[35]=_,e[36]=w):w=e[36],w}function na(n={}){const e=Object.entries(n).map(([t,s])=>`${t}=${s}`).join("&");return e.length?`?${e}`:""}function ra(n){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],t=Object.entries(n).filter(([s])=>e.includes(s)).reduce((s,[r,a])=>a==null?s:{...s,[r]:a},{});return na(t)}const sa=f.forwardRef(function(n,e){const t=L.c(11);let s,r;t[0]!==n?({searchParams:r,...s}=n,t[0]=n,t[1]=s,t[2]=r):(s=t[1],r=t[2]);let a;t[3]!==r?(a=Object.entries(r),t[3]=r,t[4]=a):a=t[4];let o;t[5]!==a?(o={type:void 0,_searchParams:a},t[5]=a,t[6]=o):o=t[6];let i;return t[7]!==e||t[8]!==s||t[9]!==o?(i=u.jsx(at,{...s,ref:e,state:o,title:void 0}),t[7]=e,t[8]=s,t[9]=o,t[10]=i):i=t[10],i}),aa=f.forwardRef(function(n,e){const t=L.c(15);let s,r,a,o;if(t[0]!==n){const{documentId:p,documentType:d,parentRefPath:h,template:m,searchParams:g,...b}=n;s=p,r=d,o=g,a=b,t[0]=n,t[1]=s,t[2]=r,t[3]=a,t[4]=o}else s=t[1],r=t[2],a=t[3],o=t[4];let i;t[5]!==o?(i=Object.entries(o),t[5]=o,t[6]=i):i=t[6];let l;t[7]!==s||t[8]!==r||t[9]!==i?(l={id:s,type:r,_searchParams:i},t[7]=s,t[8]=r,t[9]=i,t[10]=l):l=t[10];let c;return t[11]!==e||t[12]!==a||t[13]!==l?(c=u.jsx(at,{...a,ref:e,state:l,title:void 0}),t[11]=e,t[12]=a,t[13]=l,t[14]=c):c=t[14],c});function An(n){const e=L.c(26),{children:t,onStructureParams:s,structureParams:r,searchParams:a,refs:o}=n,{state:i,resolvePathFromState:l}=Rt();let c;e[0]!==i._searchParams?(c=Object.fromEntries(i._searchParams||[]),e[0]=i._searchParams,e[1]=c):c=e[1];const p=cn(c);let d;e[2]!==l||e[3]!==p||e[4]!==i?(d=I=>{const P=l(i),j=ra({...p,...I});return`${P}${j}`},e[2]=l,e[3]=p,e[4]=i,e[5]=d):d=e[5];const h=d;let m,g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g={},e[6]=g):g=e[6];const b=r;let v;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[7]=v):v=e[7];let y;e[8]!==o||e[9]!==a?(y=I=>{const{childId:P,...j}=I,T=o==null?void 0:o.find(A=>A._id===P||st(A._id)===P);return T?u.jsx(at,{...j,state:{id:P,type:T._type,_searchParams:Object.entries(a)}}):u.jsx("div",{...j})},e[8]=o,e[9]=a,e[10]=y):y=e[10];let x,_;e[11]!==a?(x=I=>u.jsx(sa,{...I,searchParams:a}),_=I=>u.jsx(aa,{...I,searchParams:a}),e[11]=a,e[12]=x,e[13]=_):(x=e[12],_=e[13]);let w;e[14]!==s?(w=I=>{s({...I,inspect:I.inspect??void 0})},e[14]=s,e[15]=w):w=e[15];let E;e[16]!==h||e[17]!==b||e[18]!==y||e[19]!==x||e[20]!==_||e[21]!==w?(E={index:0,groupIndex:0,siblingIndex:0,payload:g,params:b,hasGroupSiblings:!1,groupLength:1,routerPanesState:v,ChildLink:y,BackLink:x,ReferenceChildLink:_,ParameterizedLink:ha,closeCurrentAndAfter:ma,handleEditReference:pa,replaceCurrent:da,closeCurrent:ua,duplicateCurrent:la,setView:ca,setParams:w,setPayload:ia,navigateIntent:oa,createPathWithParams:h},e[16]=h,e[17]=b,e[18]=y,e[19]=x,e[20]=_,e[21]=w,e[22]=E):E=e[22],m=E;const C=m;let S;return e[23]!==t||e[24]!==C?(S=u.jsx(Qr.Provider,{value:C,children:t}),e[23]=t,e[24]=C,e[25]=S):S=e[25],S}function oa(n,e,t){console.warn("navigateIntent",n,e,t)}function ia(n){console.warn("setPayload",n)}function ca(n){console.warn("setView",n)}function la(n){console.warn("duplicateCurrent",n)}function ua(){console.warn("closeCurrent")}function da(n){console.warn("replaceCurrent",n)}function pa(n){console.warn("handleEditReference",n)}function ma(){console.warn("closeCurrentAndAfter")}function ha(){throw new Error("ParameterizedLink not implemented")}const fa=pe(Pn)`
  height: 100%;
`,ga=pe(ne)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,va=pe(et)`
  white-space: pre-wrap;
`;function ya(n){var P,j,T,A;const e=L.c(33),{mainDocumentState:t,onStructureParams:s,searchParams:r,refs:a}=n,{t:o}=ve(ye),{devMode:i}=Tt();let l,c;if(e[0]!==((P=t==null?void 0:t.document)==null?void 0:P._id)||e[1]!==a){let k;e[3]!==((j=t==null?void 0:t.document)==null?void 0:j._id)?(k=R=>{var M;return st(R._id)!==((M=t==null?void 0:t.document)==null?void 0:M._id)},e[3]=(T=t==null?void 0:t.document)==null?void 0:T._id,e[4]=k):k=e[4],c=a.filter(k).map(xa),e[0]=(A=t==null?void 0:t.document)==null?void 0:A._id,e[1]=a,e[2]=c}else c=e[2];l=c;const p=l;let d,h;e[5]!==p?(h={filter:"_id in $ids",params:{ids:p}},e[5]=p,e[6]=h):h=e[6];let m;e[7]!==o?(m=o("document-list-pane.document-list.title"),e[7]=o,e[8]=m):m=e[8];let g;e[9]!==h||e[10]!==m?(g={id:"$root",options:h,schemaTypeName:"",title:m,type:"documentList"},e[9]=h,e[10]=m,e[11]=g):g=e[11],d=g;const b=d,[v,y]=f.useState(null);let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=()=>y(null),e[12]=x):x=e[12];const _=x,[w]=f.useState(ba);let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E=()=>y(null),e[13]=E):E=e[13];let C;if(e[14]!==a?(C=[a],e[14]=a,e[15]=C):C=e[15],f.useEffect(E,C),v){let k;e[16]!==o?(k=o("document-list-pane.error.text"),e[16]=o,e[17]=k):k=e[17];let R;e[18]!==i||e[19]!==v||e[20]!==o?(R=i&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(Ze,{muted:!0,size:0,children:o("presentation-error.label")}),u.jsx(va,{size:1,children:v.error.message})]})}),e[18]=i,e[19]=v,e[20]=o,e[21]=R):R=e[21];let M;return e[22]!==R||e[23]!==k?(M=u.jsx(Wt,{flex:1,message:k,onRetry:_,children:R}),e[22]=R,e[23]=k,e[24]=M):M=e[24],M}let S;e[25]!==b?(S=u.jsx(ga,{direction:"column",flex:1,children:u.jsx(ns,{index:0,itemId:"$root",pane:b,paneKey:"$root"})}),e[25]=b,e[26]=S):S=e[26];let I;return e[27]!==s||e[28]!==a||e[29]!==r||e[30]!==w||e[31]!==S?(I=u.jsx(wn,{onCatch:y,children:u.jsx(fa,{children:u.jsx(xn,{children:u.jsx(An,{onStructureParams:s,structureParams:w,searchParams:r,refs:a,children:S})})})}),e[27]=s,e[28]=a,e[29]=r,e[30]=w,e[31]=S,e[32]=I):I=e[32],I}function ba(){return{}}function xa(n){return st(n._id)}const wa=pe(et)`
  white-space: pre-wrap;
`;function Pa(n){const e=L.c(35),{documentId:t,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i}=n,{template:l,templateParams:c}=i,{t:p}=ve(ye),{devMode:d}=Tt();let h,m;e[0]!==c?(m=Gr(c),e[0]=c,e[1]=m):m=e[1];let g;e[2]!==t||e[3]!==s||e[4]!==m||e[5]!==l?(g={id:t,type:s,template:l,templateParameters:m},e[2]=t,e[3]=s,e[4]=m,e[5]=l,e[6]=g):g=e[6];let b;e[7]!==t||e[8]!==g?(b={id:t,options:g,title:"",type:"document"},e[7]=t,e[8]=g,e[9]=b):b=e[9],h=b;const v=h,[y,x]=f.useState(null);let _;e[10]===Symbol.for("react.memo_cache_sentinel")?(_=()=>x(null),e[10]=_):_=e[10];const w=_;let E;e[11]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{x(null)},e[11]=E):E=e[11];let C;if(e[12]!==t||e[13]!==s||e[14]!==i?(C=[t,s,i],e[12]=t,e[13]=s,e[14]=i,e[15]=C):C=e[15],f.useEffect(E,C),y){let T;e[16]!==p?(T=p("document-pane.error.text"),e[16]=p,e[17]=T):T=e[17];let A;e[18]!==d||e[19]!==y||e[20]!==p?(A=d&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(Ze,{muted:!0,size:0,children:p("presentation-error.label")}),u.jsx(wa,{size:1,children:y.error.message})]})}),e[18]=d,e[19]=y,e[20]=p,e[21]=A):A=e[21];let k;return e[22]!==T||e[23]!==A?(k=u.jsx(Wt,{flex:1,message:T,onRetry:w,children:A}),e[22]=T,e[23]=A,e[24]=k):k=e[24],k}let S;e[25]===Symbol.for("react.memo_cache_sentinel")?(S={height:"100%"},e[25]=S):S=e[25];let I;e[26]===Symbol.for("react.memo_cache_sentinel")?(I=u.jsx(on,{}),e[26]=I):I=e[26];let P;e[27]!==r||e[28]!==v?(P=u.jsx(f.Suspense,{fallback:I,children:u.jsx(Xr,{paneKey:"document",index:1,itemId:"document",pane:v,onFocusPath:r})}),e[27]=r,e[28]=v,e[29]=P):P=e[29];let j;return e[30]!==a||e[31]!==o||e[32]!==i||e[33]!==P?(j=u.jsx(wn,{onCatch:x,children:u.jsx(Pn,{style:S,children:u.jsx(An,{searchParams:o,onStructureParams:a,structureParams:i,children:P})})}),e[30]=a,e[31]=o,e[32]=i,e[33]=P,e[34]=j):j=e[34],j}function Sa(n){const e=L.c(7),{documentId:t,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i}=n;let l;return e[0]!==t||e[1]!==s||e[2]!==r||e[3]!==a||e[4]!==o||e[5]!==i?(l=u.jsx(xn,{children:u.jsx(Pa,{documentId:t,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i})}),e[0]=t,e[1]=s,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e[6]=l):l=e[6],l}function _a(n,e){const t=L.c(6),s=Kr();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const[a,o]=f.useState(r);let i,l;return t[1]!==n||t[2]!==s||t[3]!==e?(i=()=>{if(!e)return;const c=Yr(s,e,n).subscribe(p=>{o(p)});return()=>{c==null||c.unsubscribe()}},l=[s,e,n],t[1]=n,t[2]=s,t[3]=e,t[4]=i,t[5]=l):(i=t[4],l=t[5]),f.useEffect(i,l),a}function ja(n){var S,I,P,j,T,A,k,R;const e=L.c(38),{documentId:t,documentType:s,mainDocumentState:r,onFocusPath:a,onStructureParams:o,refs:i,searchParams:l,structureParams:c}=n,{t:p}=ve(ye),d=Nr();let h;e[0]!==((S=r==null?void 0:r.document)==null?void 0:S._id)||e[1]!==((I=r==null?void 0:r.document)==null?void 0:I._type)||e[2]!==l?(h=M=>{var N,O;return u.jsx(at,{...M,state:{id:(N=r==null?void 0:r.document)==null?void 0:N._id,type:(O=r==null?void 0:r.document)==null?void 0:O._type,_searchParams:Object.entries(l)}})},e[0]=(P=r==null?void 0:r.document)==null?void 0:P._id,e[1]=(j=r==null?void 0:r.document)==null?void 0:j._type,e[2]=l,e[3]=h):h=e[3];const m=h;let g,b;e[4]!==((T=r==null?void 0:r.document)==null?void 0:T._type)||e[5]!==d?(b=d.get(((A=r==null?void 0:r.document)==null?void 0:A._type)||"shoe"),e[4]=(k=r==null?void 0:r.document)==null?void 0:k._type,e[5]=d,e[6]=b):b=e[6],g=b;const v=g,y=_a(((R=r==null?void 0:r.document)==null?void 0:R._id)||"",v);let x;e:{if(!(r!=null&&r.document)){x=null;break e}const M=r.document;let N;e[7]!==y.snapshot||e[8]!==M?(N=Dr({document:M,snapshot:y.snapshot}),e[7]=y.snapshot,e[8]=M,e[9]=N):N=e[9];let O;e[10]!==p?(O=p("main-document.label"),e[10]=p,e[11]=O):O=e[11];let z;e[12]!==O?(z=u.jsx(ue,{padding:1,radius:2,shadow:1,children:u.jsx(Q,{muted:!0,size:0,weight:"medium",children:O})}),e[12]=O,e[13]=z):z=e[13];let D;e[14]!==v||e[15]!==N||e[16]!==z?(D=u.jsx(Ur,{...N,schemaType:v,status:z}),e[14]=v,e[15]=N,e[16]=z,e[17]=D):D=e[17],x=D}const _=x;if(t&&s){let M;return e[18]!==t||e[19]!==s||e[20]!==a||e[21]!==o||e[22]!==l||e[23]!==c?(M=u.jsx(Sa,{documentId:t,documentType:s,onFocusPath:a,onStructureParams:o,searchParams:l,structureParams:c}),e[18]=t,e[19]=s,e[20]=a,e[21]=o,e[22]=l,e[23]=c,e[24]=M):M=e[24],M}let w;e[25]!==m||e[26]!==r||e[27]!==_||e[28]!==p?(w=r&&u.jsx(ue,{padding:3,tone:r.document?"inherit":"caution",children:r.document?u.jsx(qr,{__unstable_focusRing:!0,as:m,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:_}):u.jsx(ue,{padding:2,radius:2,tone:"inherit",children:u.jsxs(ne,{gap:3,children:[u.jsx(de,{flex:"none",children:u.jsx(Q,{size:1,children:u.jsx(Fr,{})})}),u.jsx(de,{flex:1,children:u.jsx(Q,{size:1,children:u.jsx(Vr,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:r.path}})})})]})})}),e[25]=m,e[26]=r,e[27]=_,e[28]=p,e[29]=w):w=e[29];let E;e[30]!==r||e[31]!==o||e[32]!==i||e[33]!==l?(E=u.jsx(ya,{mainDocumentState:r,onStructureParams:o,searchParams:l,refs:i}),e[30]=r,e[31]=o,e[32]=i,e[33]=l,e[34]=E):E=e[34];let C;return e[35]!==w||e[36]!==E?(C=u.jsxs(ne,{direction:"column",flex:1,height:"fill",children:[w,E]}),e[35]=w,e[36]=E,e[37]=C):C=e[37],C}function Ea(n){const e=L.c(2);let t;e[0]!==n?(t=()=>n||We(),e[0]=n,e[1]=t):t=e[1];const[s]=f.useState(t);return s}const Ra=pe.div`
  position: relative;
`,Ca=pe.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:n})=>n?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:n})=>!n&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,Mn=function(n){const e=L.c(27),{id:t,order:s,disabled:r}=n,a=r===void 0?!1:r,o=f.useRef(null),i=f.useContext(Ct);if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");const l=Ea(t),{activeResizer:c,drag:p,startDragging:d,stopDragging:h,registerElement:m,unregisterElement:g}=i,b=c===l;if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");let v;e[0]!==l||e[1]!==d?(v=R=>{d(l,R.nativeEvent)},e[0]=l,e[1]=d,e[2]=v):v=e[2];const y=v;let x;e[3]!==p||e[4]!==l?(x=R=>{p(l,R)},e[3]=p,e[4]=l,e[5]=x):x=e[5];const _=x;let w;e[6]!==h?(w=()=>{o.current.blur(),h()},e[6]=h,e[7]=w):w=e[7];const E=w;let C,S;e[8]!==a||e[9]!==b||e[10]!==_||e[11]!==E?(C=()=>{if(!b||a)return;const R=function(){const M=document.body.style,N=document.documentElement.style,{cursor:O}=N,{userSelect:z}=M;return N.cursor="ew-resize",M.userSelect="none",()=>{O?N.cursor=O:N.removeProperty("cursor"),z?M.userSelect=z:M.removeProperty("user-select")}}();return window.addEventListener("mousemove",_),window.addEventListener("mouseup",E),window.addEventListener("contextmenu",E),()=>{R(),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",E),window.removeEventListener("contextmenu",E)}},S=[a,b,_,E],e[8]=a,e[9]=b,e[10]=_,e[11]=E,e[12]=C,e[13]=S):(C=e[12],S=e[13]),f.useEffect(C,S);let I,P;e[14]!==l||e[15]!==s||e[16]!==m||e[17]!==g?(I=()=>(m(l,{id:l,order:s,type:"resizer",el:o}),()=>{g(l)}),P=[l,s,m,g],e[14]=l,e[15]=s,e[16]=m,e[17]=g,e[18]=I,e[19]=P):(I=e[18],P=e[19]),f.useLayoutEffect(I,P);let j,T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=u.jsx("span",{}),j=u.jsx("span",{}),e[20]=j,e[21]=T):(j=e[20],T=e[21]);let A;e[22]!==a?(A=u.jsxs(Ca,{$disabled:a,children:[T,j]}),e[22]=a,e[23]=A):A=e[23];let k;return e[24]!==y||e[25]!==A?(k=u.jsx(Ra,{onMouseDown:y,ref:o,children:A}),e[24]=y,e[25]=A,e[26]=k):k=e[26],k},Ta=n=>{const e=L.c(8),{documentId:t,setDisplayedDocument:s,getCommentIntent:r}=n;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=u.jsx(Mn,{order:4}),e[0]=a):a=e[0];let o;e[1]!==r||e[2]!==n.children?(o=u.jsx(Pr,{getIntent:r,children:n.children}),e[1]=r,e[2]=n.children,e[3]=o):o=e[3];let i;return e[4]!==t||e[5]!==s||e[6]!==o?(i=u.jsxs(u.Fragment,{children:[a,u.jsx(zt,{id:"content",minWidth:325,order:5,children:u.jsx(as,{documentId:t,setDisplayedDocument:s,children:o})})]}),e[4]=t,e[5]=s,e[6]=o,e[7]=i):i=e[7],i},Ia=n=>{const e=L.c(14),{documentId:t,documentsOnPage:s,documentType:r,getCommentIntent:a,mainDocumentState:o,onFocusPath:i,onStructureParams:l,searchParams:c,setDisplayedDocument:p,structureParams:d}=n;let h;e[0]!==t||e[1]!==r||e[2]!==s||e[3]!==o||e[4]!==i||e[5]!==l||e[6]!==c||e[7]!==d?(h=u.jsx(ja,{documentId:t,documentType:r,mainDocumentState:o,onFocusPath:i,onStructureParams:l,refs:s,searchParams:c,structureParams:d}),e[0]=t,e[1]=r,e[2]=s,e[3]=o,e[4]=i,e[5]=l,e[6]=c,e[7]=d,e[8]=h):h=e[8];let m;return e[9]!==t||e[10]!==a||e[11]!==p||e[12]!==h?(m=u.jsx(Ta,{documentId:t,getCommentIntent:a,setDisplayedDocument:p,children:h}),e[9]=t,e[10]=a,e[11]=p,e[12]=h,e[13]=m):m=e[13],m},ka=function(n){const e=L.c(5),{children:t,navigate:s}=n;let r;e[0]!==s?(r=(i,l)=>{s((l===void 0?void 0:l)||{},i?{preview:i}:{})},e[0]=s,e[1]=r):r=e[1];const a=r;let o;return e[2]!==t||e[3]!==a?(o=u.jsx(gr.Provider,{value:a,children:t}),e[2]=t,e[3]=a,e[4]=o):o=e[4],o};function Aa(n,e){const t=L.c(9);let s;t[0]!==e||t[1]!==n?(s=()=>JSON.parse(localStorage.getItem(n)??JSON.stringify(e)),t[0]=e,t[1]=n,t[2]=s):s=t[2];const[r,a]=f.useState(s);let o,i;t[3]!==n||t[4]!==r?(o=()=>{localStorage.setItem(n,JSON.stringify(r))},i=[n,r],t[3]=n,t[4]=r,t[5]=o,t[6]=i):(o=t[5],i=t[6]),f.useEffect(o,i);let l;return t[7]!==r?(l=[r,a],t[7]=r,t[8]=l):l=t[8],l}function Ma(n){const e=L.c(11),{unstable_navigator:t}=n,s=!!(t!=null&&t.component),[r,a]=Aa("presentation/navigator",s),o=s?r:!1;let i;e:{if(!s){i=void 0;break e}let m;e[0]!==a?(m=()=>a($a),e[0]=a,e[1]=m):m=e[1],i=m}const l=i;let c;e[2]!==o||e[3]!==t?(c=function(){return u.jsx(u.Fragment,{children:o&&u.jsx(La,{...t})})},e[2]=o,e[3]=t,e[4]=c):c=e[4];const p=c;let d;e[5]!==o||e[6]!==l?(d={navigatorEnabled:o,toggleNavigator:l},e[5]=o,e[6]=l,e[7]=d):d=e[7];let h;return e[8]!==p||e[9]!==d?(h=[d,p],e[8]=p,e[9]=d,e[10]=h):h=e[10],h}function $a(n){return!n}function Oa(n){const e=L.c(11),{minWidth:t,maxWidth:s,component:r}=n,a=t!=null&&s!=null&&t===s;let o;e[0]!==r?(o=u.jsx(r,{}),e[0]=r,e[1]=o):o=e[1];let i;e[2]!==s||e[3]!==t||e[4]!==o?(i=u.jsx(zt,{id:"navigator",minWidth:t,maxWidth:s,order:1,children:o}),e[2]=s,e[3]=t,e[4]=o,e[5]=i):i=e[5];let l;e[6]!==a?(l=u.jsx(Mn,{order:2,disabled:a}),e[6]=a,e[7]=l):l=e[7];let c;return e[8]!==i||e[9]!==l?(c=u.jsxs(u.Fragment,{children:[i,l]}),e[8]=i,e[9]=l,e[10]=c):c=e[10],c}const La=f.memo(Oa),za=function(n){const e=L.c(3),{children:t,params:s}=n;let r;r=s;const a=r;let o;return e[0]!==t||e[1]!==a?(o=u.jsx(vr.Provider,{value:a,children:t}),e[0]=t,e[1]=a,e[2]=o):o=e[2],o},Wa=function(n){const e=L.c(10),{children:t,devMode:s,name:r,navigate:a,params:o,searchParams:i,structureParams:l}=n;let c,p;e[0]!==s||e[1]!==r||e[2]!==a||e[3]!==o||e[4]!==i||e[5]!==l?(p={devMode:s,name:r,navigate:a,params:o,searchParams:i,structureParams:l},e[0]=s,e[1]=r,e[2]=a,e[3]=o,e[4]=i,e[5]=l,e[6]=p):p=e[6],c=p;const d=c;let h;return e[7]!==t||e[8]!==d?(h=u.jsx(fr.Provider,{value:d,children:t}),e[7]=t,e[8]=d,e[9]=h):h=e[9],h};function Nt(n){return Array.isArray(n)?n.join(","):n}const Na=Ke.create(pe.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),Da=pe(de)`
  position: absolute;
  inset: 0;
  background: transparent;
`,Ua=f.forwardRef(function(n,e){const t=L.c(16),{animate:s,initial:r,onLoad:a,preventClick:o,src:i,variants:l,style:c}=n,p=`presentation-tool-iframe-${f.useId().replace(/[^a-zA-Z0-9-_]/g,"_")}`;let d;t[0]!==c||t[1]!==p?(d={...c,viewTransitionName:p},t[0]=c,t[1]=p,t[2]=d):d=t[2];let h;t[3]!==s||t[4]!==r||t[5]!==a||t[6]!==e||t[7]!==i||t[8]!==d||t[9]!==l?(h=u.jsx(Na,{style:d,animate:s,initial:r,onLoad:a,ref:e,src:i,variants:l}),t[3]=s,t[4]=r,t[5]=a,t[6]=e,t[7]=i,t[8]=d,t[9]=l,t[10]=h):h=t[10];let m;t[11]!==o?(m=o&&u.jsx(Da,{}),t[11]=o,t[12]=m):m=t[12];let g;return t[13]!==h||t[14]!==m?(g=u.jsxs(u.Fragment,{children:[h,m]}),t[13]=h,t[14]=m,t[15]=g):g=t[15],g});function qa(n){const e=L.c(16),{openPopup:t,previewLocationOrigin:s,previewLocationRoute:r}=n,{t:a}=ve(ye);let o;e[0]!==t?(o=b=>{b.preventDefault(),t(b.currentTarget.href)},e[0]=t,e[1]=o):o=e[1];const i=o;let l;e[2]!==a?(l=a("share-url.menu-item.open.text"),e[2]=a,e[3]=l):l=e[3];let c;e[4]!==l?(c=u.jsx(Q,{size:1,children:l}),e[4]=l,e[5]=c):c=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=["bottom-start"],e[6]=p):p=e[6];let d;e[7]!==a?(d=a("share-url.menu-item.open.text"),e[7]=a,e[8]=d):d=e[8];const h=`${s}${r}`;let m;e[9]!==i||e[10]!==d||e[11]!==h?(m=u.jsx(Se,{as:"a","aria-label":d,icon:Jr,mode:"bleed",href:h,rel:"opener",target:"_blank",tooltipProps:null,onClick:i}),e[9]=i,e[10]=d,e[11]=h,e[12]=m):m=e[12];let g;return e[13]!==c||e[14]!==m?(g=u.jsx(qe,{animate:!0,content:c,fallbackPlacements:p,placement:"bottom",portal:!0,children:m}),e[13]=c,e[14]=m,e[15]=g):g=e[15],g}const Fa=function(n){var z;const e=L.c(27),{fontSize:t,onChange:s,origin:r,padding:a,prefix:o,suffix:i,value:l}=n,c=t===void 0?1:t,p=a===void 0?3:a,{t:d}=ve(ye),{basePath:h}=((z=pn())==null?void 0:z.activeWorkspace)||{},m=h===void 0?"/":h,g=f.useRef(null),[b,v]=f.useState(void 0),[y,x]=f.useState(void 0);let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_=D=>{v(D.currentTarget.value)},e[0]=_):_=e[0];const w=_;let E;e[1]!==m||e[2]!==s||e[3]!==r||e[4]!==b||e[5]!==d?(E=D=>{var X;if(D.key==="Enter"){if(b===void 0)return;const V=b.startsWith("/")||b===""?`${r}${b}`:b;if(!V.startsWith(`${r}/`)&&V!==r){x(d("preview-location-input.error",{origin:r,context:"missing-origin"}));return}if(!r&&(V.startsWith(`${m}/`)||V===m)){x(d("preview-location-input.error",{basePath:m,context:"same-base-path"}));return}const Y=V===r?`${r}/`:V;x(void 0),v(void 0),s(Y.slice(r.length)),(X=g.current)==null||X.blur()}D.key==="Escape"&&(x(void 0),v(void 0))},e[1]=m,e[2]=s,e[3]=r,e[4]=b,e[5]=d,e[6]=E):E=e[6];const C=E;let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{x(void 0),v(void 0)},e[7]=S):S=e[7];const I=S;let P;e[8]===Symbol.for("react.memo_cache_sentinel")?(P=()=>{x(void 0),v(void 0)},e[8]=P):P=e[8];let j;e[9]!==r||e[10]!==l?(j=[r,l],e[9]=r,e[10]=l,e[11]=j):j=e[11],f.useEffect(P,j);let T,A;e[12]===Symbol.for("react.memo_cache_sentinel")?(A={icon:Zr},e[12]=A):A=e[12],T=A;const k=y?T:void 0;let R;e[13]!==r||e[14]!==l?(R=()=>{x(void 0),v(r+l)},e[13]=r,e[14]=l,e[15]=R):R=e[15];let M;e[16]===Symbol.for("react.memo_cache_sentinel")?(M={zIndex:1},e[16]=M):M=e[16];const N=b===void 0?`${r}${l}`:b;let O;return e[17]!==y||e[18]!==c||e[19]!==C||e[20]!==p||e[21]!==o||e[22]!==i||e[23]!==k||e[24]!==R||e[25]!==N?(O=u.jsx(u.Fragment,{children:u.jsx(Hr,{clearButton:k,customValidity:y,fontSize:c,onBlur:I,onClear:R,onChange:w,onKeyDownCapture:C,padding:p,prefix:o,style:M,radius:2,ref:g,space:p,suffix:i,value:N})}),e[17]=y,e[18]=c,e[19]=C,e[20]=p,e[21]=o,e[22]=i,e[23]=k,e[24]=R,e[25]=N,e[26]=O):O=e[26],O},Va=f.lazy(()=>Ae(()=>import("./QRCodeSVG-tSLJ_Xrv.js"),__vite__mapDeps([0,1]))),xt=24,Ba=16,Ha=224,Ka=pe(es)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${xt}px;
  width: ${xt}px;
`,Ga=Ke.create(Je),Qa=Ke.create(Q),Xa=Ke.create(Ka),$n=f.memo(function(n){const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:t,initialUrl:s,previewLocationRoute:r,perspective:a}=n,{t:o}=ve(ye),{push:i}=an(),l=Be({apiVersion:He}),c=It(),[p,d]=f.useState(!0),[h,m]=f.useState(!1),[g,b]=f.useState(!1),[v,y]=f.useState(null),x=h||g||p,_=f.useMemo(()=>v?Rs(s,v,r,Nt(a)):null,[s,a,r,v]),[w,E]=f.useState(null);if(w)throw w;const C=f.useCallback(()=>{i({closable:!0,status:"warning",title:o("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},[i,o]),S=f.useCallback(async()=>{try{b(!0),await Ts(l,"@sanity/presentation",typeof window>"u"?"":location.href,c==null?void 0:c.id),y(null)}catch(j){E(j)}finally{b(!1)}},[l,c==null?void 0:c.id]),I=f.useCallback(async()=>{try{m(!0);const j=await Cs(l,"@sanity/presentation",typeof window>"u"?"":location.href,c==null?void 0:c.id);y(j.secret)}catch(j){E(j)}finally{m(!1)}},[l,c==null?void 0:c.id]),P=f.useCallback(()=>{try{if(!_)throw new Error("No URL to copy");navigator.clipboard.writeText(_.toString()),i({closable:!0,status:"success",title:o("share-url.clipboard.status",{context:"success"})})}catch(j){E(j)}},[i,o,_]);return f.useEffect(()=>{let j=new AbortController,T=[];async function A(R,M){const{result:N,syncTags:O}=await l.fetch(Br,{},{filterResponse:!1,lastLiveEventId:R,tag:"presentation.fetch-shared-access-secret"});Array.isArray(O)&&(T=O),M.aborted||y(N)}const k=l.live.events().subscribe({next:R=>{R.type==="message"&&(j.abort(),j=new AbortController,R.tags.some(M=>T.includes(M))&&A(R.id,j.signal))},error:E});return A(null,j.signal).finally(()=>d(!1)),()=>{k.unsubscribe(),j.abort()}},[l]),u.jsx(Cr,{button:u.jsx(Se,{"aria-label":o("preview-frame.share-button.aria-label"),icon:$r,mode:"bleed",tooltipProps:null}),id:"share-menu",menu:u.jsx(Tr,{style:{maxWidth:248},padding:t?void 0:0,children:t?u.jsxs(u.Fragment,{children:[u.jsx("label",{style:{cursor:"pointer"},children:u.jsxs(Ir,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[u.jsx(qe,{animate:!0,content:u.jsx(Q,{size:1,children:o("share-preview-menu.toggle-button.tooltip",{context:_?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:u.jsx(gn,{checked:h||_!==null&&!g,readOnly:h||g,indeterminate:p,onChange:e?_?S:I:C})}),u.jsx(Q,{size:1,weight:"medium",children:o("share-preview-menu.toggle-button.label",{context:"first-line"})}),u.jsx("span",{}),u.jsx(Q,{muted:!0,size:1,children:o("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),u.jsx(de,{padding:3,paddingTop:2,children:u.jsxs(Oe,{space:3,children:[u.jsx(ue,{tone:x||!_?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(fn,{children:x?u.jsx(Ga,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):_?u.jsx(u.Fragment,{children:u.jsxs(f.Suspense,{fallback:u.jsx(Je,{}),children:[u.jsx(Va,{title:o("share-preview-menu.qr-code.title",{url:_.toString()}),value:_.toString(),size:Ha,color:"var(--card-fg-color)",logoSize:xt+Ba}),u.jsx(Xa,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):u.jsx(Qa,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o("share-preview-menu.qr-code.placeholder")})})}),u.jsx(Q,{muted:!0,size:1,children:o("share-preview-menu.qr-code.instructions")})]})}),u.jsx(kr,{}),u.jsx(Ar,{disabled:!_||g,icon:Mr,onClick:P,text:o("share-preview-menu.copy-url.text")})]}):u.jsx(ue,{padding:2,tone:"caution",radius:3,children:u.jsx(Q,{style:{textWrap:"pretty"},children:o("share-preview-menu.error",{context:"missing-grants"})})})}),popover:{constrainSize:!0,placement:"bottom",portal:!0}})});$n.displayName="Memo(SharePreviewMenu)";const Ya=n=>{const e=L.c(97),{canSharePreviewAccess:t,canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,dispatch:a,iframe:o,iframeRef:i,initialUrl:l,navigatorEnabled:c,onPathChange:p,onRefresh:d,openPopup:h,overlaysConnection:m,perspective:g,previewUrl:b,setViewport:v,targetOrigin:y,toggleNavigator:x,toggleOverlay:_,viewport:w,visualEditing:E}=n,{overlaysEnabled:C}=E,{t:S}=ve(ye);let I;e[0]!==v||e[1]!==w?(I=()=>v(w==="desktop"?"mobile":"desktop"),e[0]=v,e[1]=w,e[2]=I):I=e[2];const P=I;let j;j=y===location.origin?"":y;const T=j;let A;e[3]!==a||e[4]!==i.current||e[5]!==d||e[6]!==b||e[7]!==y?(A=()=>{d(()=>{i.current&&(a({type:hn}),Object.assign(i.current,{src:`${y}${b||"/"}`}))})},e[3]=a,e[4]=i.current,e[5]=d,e[6]=b,e[7]=y,e[8]=A):A=e[8];const k=A;let R;const M=new URL(b||"/",y),{pathname:N,search:O}=Es(M);R=`${N}${O}`;const z=R;let D;e[9]===Symbol.for("react.memo_cache_sentinel")?(D={width:"100%"},e[9]=D):D=e[9];let X;e[10]!==c||e[11]!==S||e[12]!==x?(X=x&&u.jsx(Se,{"aria-label":S("preview-frame.navigator.toggle-button.aria-label"),icon:Sr,mode:"bleed",onClick:x,selected:c,tooltipProps:{content:u.jsx(Q,{size:1,children:S("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[10]=c,e[11]=S,e[12]=x,e[13]=X):X=e[13];let V;e[14]===Symbol.for("react.memo_cache_sentinel")?(V={whiteSpace:"nowrap"},e[14]=V):V=e[14];const Y=C?"disable":"enable";let re;e[15]!==S||e[16]!==Y?(re=S("preview-frame.overlay.toggle-button.tooltip",{context:Y}),e[15]=S,e[16]=Y,e[17]=re):re=e[17];let ie;e[18]!==re?(ie=u.jsx(de,{padding:1,children:u.jsx(Q,{size:1,children:re})}),e[18]=re,e[19]=ie):ie=e[19];let W;e[20]===Symbol.for("react.memo_cache_sentinel")?(W=u.jsx(de,{paddingY:1,children:u.jsx(Or,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[20]=W):W=e[20];let Z;e[21]!==ie?(Z=u.jsxs(ne,{align:"center",style:V,children:[ie,W]}),e[21]=ie,e[22]=Z):Z=e[22];let ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(ce=["bottom-start"],e[23]=ce):ce=e[23];let le;e[24]===Symbol.for("react.memo_cache_sentinel")?(le={lineHeight:0,borderRadius:999,userSelect:"none"},e[24]=le):le=e[24];const B=C?"transparent":void 0;let F;e[25]===Symbol.for("react.memo_cache_sentinel")?(F={margin:-4},e[25]=F):F=e[25];const H=o.status==="loading"||m!=="connected";let K;e[26]!==C||e[27]!==H||e[28]!==_?(K=u.jsx("div",{style:F,children:u.jsx(gn,{checked:C,onChange:_,disabled:H})}),e[26]=C,e[27]=H,e[28]=_,e[29]=K):K=e[29];const se=!C;let G;e[30]!==S?(G=S("preview-frame.overlay.toggle-button.text"),e[30]=S,e[31]=G):G=e[31];let ee;e[32]!==se||e[33]!==G?(ee=u.jsx(de,{children:u.jsx(Q,{muted:se,size:1,weight:"medium",children:G})}),e[32]=se,e[33]=G,e[34]=ee):ee=e[34];let J;e[35]!==K||e[36]!==ee?(J=u.jsxs(ne,{align:"center",gap:3,children:[K,ee]}),e[35]=K,e[36]=ee,e[37]=J):J=e[37];let ae;e[38]!==B||e[39]!==J?(ae=u.jsx(ue,{as:"label",flex:"none",padding:3,marginX:1,style:le,tone:B,children:J}),e[38]=B,e[39]=J,e[40]=ae):ae=e[40];let oe;e[41]!==Z||e[42]!==ae?(oe=u.jsx(qe,{animate:!0,content:Z,fallbackPlacements:ce,placement:"bottom",portal:!0,children:ae}),e[41]=Z,e[42]=ae,e[43]=oe):oe=e[43];let he;e[44]!==o.status||e[45]!==S?(he=o.status==="loaded"?S("preview-frame.refresh-button.tooltip"):S("preview-frame.status",{context:o.status}),e[44]=o.status,e[45]=S,e[46]=he):he=e[46];let fe;e[47]!==he?(fe=u.jsx(Q,{size:1,children:he}),e[47]=he,e[48]=fe):fe=e[48];let _e;e[49]===Symbol.for("react.memo_cache_sentinel")?(_e=["bottom-end"],e[49]=_e):_e=e[49];let me;e[50]!==S?(me=S("preview-frame.refresh-button.aria-label"),e[50]=S,e[51]=me):me=e[51];const je=o.status==="reloading"||o.status==="refreshing";let ge;e[52]!==k||e[53]!==me||e[54]!==je?(ge=u.jsx(Se,{"aria-label":me,icon:Lr,mode:"bleed",loading:je,onClick:k,tooltipProps:null}),e[52]=k,e[53]=me,e[54]=je,e[55]=ge):ge=e[55];let Ee;e[56]!==fe||e[57]!==ge?(Ee=u.jsx(de,{padding:1,children:u.jsx(qe,{animate:!0,content:fe,fallbackPlacements:_e,placement:"bottom",portal:!0,children:ge})}),e[56]=fe,e[57]=ge,e[58]=Ee):Ee=e[58];let be;e[59]!==h||e[60]!==T||e[61]!==z?(be=u.jsx(de,{padding:1,children:u.jsx(qa,{openPopup:h,previewLocationOrigin:T,previewLocationRoute:z})}),e[59]=h,e[60]=T,e[61]=z,e[62]=be):be=e[62];let Re;e[63]!==p||e[64]!==T||e[65]!==z||e[66]!==Ee||e[67]!==be?(Re=u.jsx(de,{flex:1,children:u.jsx(Fa,{prefix:Ee,onChange:p,origin:T,suffix:be,value:z})}),e[63]=p,e[64]=T,e[65]=z,e[66]=Ee,e[67]=be,e[68]=Re):Re=e[68];const Le=w==="desktop"?"narrow":"full";let Ce;e[69]!==S||e[70]!==Le?(Ce=S("preview-frame.viewport-button.tooltip",{context:Le}),e[69]=S,e[70]=Le,e[71]=Ce):Ce=e[71];let Te;e[72]!==Ce?(Te=u.jsx(Q,{size:1,children:Ce}),e[72]=Ce,e[73]=Te):Te=e[73];let Me;e[74]===Symbol.for("react.memo_cache_sentinel")?(Me=["bottom-start"],e[74]=Me):Me=e[74];let xe;e[75]!==S?(xe=S("preview-frame.viewport-button.aria-label"),e[75]=S,e[76]=xe):xe=e[76];const ze=w==="desktop"?_r:jr;let we;e[77]!==xe||e[78]!==ze||e[79]!==P?(we=u.jsx(Se,{"aria-label":xe,icon:ze,mode:"bleed",onClick:P,tooltipProps:null}),e[77]=xe,e[78]=ze,e[79]=P,e[80]=we):we=e[80];let Pe;e[81]!==Te||e[82]!==we?(Pe=u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(qe,{animate:!0,content:Te,fallbackPlacements:Me,placement:"bottom",portal:!0,children:we})}),e[81]=Te,e[82]=we,e[83]=Pe):Pe=e[83];let $;e[84]!==t||e[85]!==s||e[86]!==r||e[87]!==l||e[88]!==g||e[89]!==z?($=t&&u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx($n,{canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,previewLocationRoute:z,initialUrl:l,perspective:g})}),e[84]=t,e[85]=s,e[86]=r,e[87]=l,e[88]=g,e[89]=z,e[90]=$):$=e[90];let q;return e[91]!==oe||e[92]!==Re||e[93]!==Pe||e[94]!==$||e[95]!==X?(q=u.jsxs(ne,{align:"center",gap:1,paddingX:1,style:D,children:[X,oe,Re,Pe,$]}),e[91]=oe,e[92]=Re,e[93]=Pe,e[94]=$,e[95]=X,e[96]=q):q=e[96],q};function Ja(n){var c;const e=L.c(7),t=Za,s=(c=n.options)==null?void 0:c.component;let r;e[0]!==s||e[1]!==n?(r=s?u.jsx(s,{...n,renderDefault:t}):t(n),e[0]=s,e[1]=n,e[2]=r):r=e[2];const a=r;let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o={position:"relative"},e[3]=o):o=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i={minHeight:0},e[4]=i):i=e[4];let l;return e[5]!==a?(l=u.jsx(ue,{flex:"none",padding:2,borderBottom:!0,style:o,children:u.jsx(ne,{align:"center",style:i,children:a})}),e[5]=a,e[6]=l):l=e[6],l}function Za(n){return u.jsx(Ya,{...n})}const mt=Ke.create(ne),On=f.memo(f.forwardRef(function(n,e){const{dispatch:t,iframe:s,header:r,initialUrl:a,loadersConnection:o,overlaysConnection:i,perspective:l,viewport:c,vercelProtectionBypass:p}=n,[d,h]=f.useState(null),m=Nt(d===null?l:d),g=f.useMemo(()=>{const W=new URL(a);return W.searchParams.get(Fe)||W.searchParams.set(Fe,m),(p||W.searchParams.get(De))&&W.searchParams.set(_t,"samesitenone"),p&&!W.searchParams.get(De)&&W.searchParams.set(De,p),W},[a,m,p]);f.useEffect(()=>{o==="connected"&&h(W=>W===null?l:W)},[o,l]);const{t:b}=ve(ye),{devMode:v}=Tt(),y=br(),x=f.useRef(null),_=u.jsx(Ja,{...n,iframeRef:x,options:r});f.useImperativeHandle(e,()=>x.current);const w=s.status==="loading"||s.status==="reloading",[E,C]=f.useState(!1),S=s.status==="refreshing",[I,P]=f.useState(!1),j=w||S||i==="connecting",T=f.useCallback(()=>{x.current&&(x.current.src=g.toString(),t({type:hn}))},[t,g]),A=f.useCallback(()=>{R(!0)},[]),[k,R]=f.useState(!1),[M,N]=f.useState(!1);f.useEffect(()=>{if(!(w||S)&&(i==="connecting"||i==="reconnecting")){const W=setTimeout(()=>{N(!0)},5e3);return()=>clearTimeout(W)}},[i,w,S]),f.useEffect(()=>{if(!(w||S||!M)){if(i==="connected"&&(P(!1),N(!1),C(!1),R(!1)),i==="connecting"){const W=setTimeout(()=>{C(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},qt);return()=>clearTimeout(W)}if(i==="reconnecting"){const W=setTimeout(()=>{C(!0),P(!0)},qt);return()=>clearTimeout(W)}}},[w,i,S,M]);const O=f.useCallback(()=>{t({type:un})},[t]);f.useEffect(()=>{if(!x.current)return;const W=x.current;function Z(){W===document.activeElement&&W.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))}return window.addEventListener("blur",Z),()=>{window.removeEventListener("blur",Z)}},[]);const z=f.useMemo(()=>(w||i==="connecting"&&s.status!=="refreshing")&&!k,[k,s.status,w,i]),D=f.useSyncExternalStore(f.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),X=f.useMemo(()=>[z?"background":"active",w?"reloading":"idle",D?"":c,M&&!k?"timedOut":""],[D,k,w,z,M,c]),[V,Y]=f.useState(c),[re,ie]=f.useState(ht[c]);return f.useEffect(()=>{if(D&&c!==V){const W=()=>{Y(c),ie(ht[c])};!y&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition(()=>xr.flushSync(()=>W())):W()}},[D,y,V,c]),u.jsx(is,{transition:y?{duration:0}:void 0,children:u.jsxs(wr,{children:[_,u.jsx(ue,{flex:1,tone:"transparent",children:u.jsxs(ne,{align:"center",height:"fill",justify:"center",padding:(D?V:c)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:j?"wait":void 0},children:[u.jsx(fn,{children:!I&&!w&&!S&&M&&!k?u.jsx(mt,{initial:"initial",animate:"animate",exit:"exit",variants:Xt,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:E?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:E?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:u.jsxs(ne,{style:{...rt[c]},justify:"center",align:"center",direction:"column",gap:4,children:[E&&u.jsx(Se,{disabled:!0,mode:"ghost",text:b("preview-frame.continue-button.text"),style:{opacity:0}}),u.jsx(ue,{radius:2,tone:E?"caution":"inherit",padding:4,shadow:1,children:u.jsxs(ne,{justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Je,{muted:!0}),u.jsx(Q,{muted:!0,size:1,children:E?b("preview-frame.status",{context:"timeout"}):b("preview-frame.status",{context:"connecting"})})]})}),E&&u.jsx(Se,{tone:"critical",onClick:A,text:b("preview-frame.continue-button.text")})]})}):(w||i==="connecting"&&s.status!=="refreshing")&&!k?u.jsx(mt,{initial:"initial",animate:"animate",exit:"exit",variants:Xt,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:u.jsxs(ne,{style:{...rt[c]},justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Je,{muted:!0}),u.jsx(Q,{muted:!0,size:1,children:b("preview-frame.status",{context:"loading"})})]})}):I&&!k?u.jsx(mt,{initial:"initial",animate:"animate",exit:"exit",variants:eo,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:u.jsx(Wt,{flex:1,message:b("preview-frame.connection.error.text"),onRetry:T,onContinueAnyway:A,children:v&&u.jsxs(u.Fragment,{children:[i!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(Ze,{muted:!0,size:0,children:b("preview-frame.overlay.connection-status.label")}),u.jsx(et,{size:1,children:b("channel.status",{context:i})})]})}),o!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(Ze,{muted:!0,size:0,children:b("preview-frame.loader.connection-status.label")}),u.jsx(et,{size:1,children:b("channel.status",{context:o})})]})})]})})}):null}),u.jsx(Ua,{animate:X,initial:["background"],onLoad:O,preventClick:z,ref:x,src:g.toString(),style:re,variants:ht})]})})]})})}));On.displayName="Memo(ForwardRef(Preview))";const rt={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},Xt={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},eo={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},ht={desktop:{...rt.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...rt.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function to(){let n=!1;return(...e)=>{n||(console.warn(...e),n=!0)}}const no=to();function ro(n,e){hr(n);const[t,s]=f.useState({}),[r,a]=f.useState({}),o=f.useRef(""),i=f.useCallback((l,c,p=[])=>{const d=p.filter(h=>"_projectId"in h&&h._projectId?(no("Cross dataset references are not supported yet, ignoring source document",h),!1):h);(c==="published"?s:a)(h=>{const m={};for(const b of d)m[b._id]=b;if(o.current!==e.current.url)return o.current=e.current.url,{[l]:m};const g=h[l];return ss(g,m)?h:{...h,[l]:m}})},[e]);return[f.useMemo(()=>{const l=Object.values(n==="published"?t:r).reduce((c,p)=>(Object.values(p).forEach(d=>{c[d._id]=d}),c),{});return Object.values(l)},[n,r,t]),i]}function Ln(n,e){return n instanceof Function?n(e):n}function so(n,e){var t;if(n.resolve){const s=(t=n.resolve(e))==null?void 0:t.filter;return s?`// groq
*[${s}][0]{_id, _type}`:void 0}return"type"in n?`// groq
*[_type == "${n.type}"][0]{_id, _type}`:`// groq
*[${Ln(n.filter,e)}][0]{_id, _type}`}function ao(n,e){var t;return n.resolve?((t=n.resolve(e))==null?void 0:t.params)??e.params:"type"in n?{}:Ln(n.params,e)??e.params}function oo(n,e){const t=Array.isArray(n)?n:[n];for(n of t){let s,r=n;if(typeof n=="string")try{const a=new URL(n);s=a.origin,r=a.pathname}catch{}if(!(s&&e.origin!==s))try{const a=As(r,{decode:decodeURIComponent})(e.pathname);if(a){const{params:o,path:i}=a;return{origin:s,params:o,path:i}}}catch{throw new Error(`"${n}" is not a valid route pattern`)}}}function io(n){var E,C;const e=L.c(20),{navigate:t,navigationHistory:s,path:r,previewUrl:a,resolvers:o}=n;let i;e[0]!==o?(i=o===void 0?[]:o,e[0]=o,e[1]=i):i=e[1];const l=i,{state:c}=Rt();let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={apiVersion:He},e[2]=p):p=e[2];const d=Be(p);let h;e[3]!==r||e[4]!==c?(h=r||((C=(E=c._searchParams)==null?void 0:E.find(co))==null?void 0:C[1])||"",e[3]=r,e[4]=c,e[5]=h):h=e[5];const m=h,[g,b]=f.useState(void 0),v=f.useRef(void 0);let y;e[6]!==t||e[7]!==s?(y=(S,I)=>{var P,j;(!S||v.current!==S._id)&&(b({document:S,path:I.pathname}),v.current=S==null?void 0:S._id,((P=s.at(-1))==null?void 0:P.id)===((j=s.at(-2))==null?void 0:j.id)&&(t==null||t({id:S==null?void 0:S._id,type:S==null?void 0:S._type})))},e[6]=t,e[7]=s,e[8]=y):y=e[8];const x=ln(y);let _;e[9]!==d||e[10]!==x||e[11]!==a||e[12]!==m||e[13]!==l?(_=()=>{const S=typeof a=="string"?a:typeof a=="object"&&(a==null?void 0:a.origin)||location.origin,I=new URL(m,S);if(l.length){let P;for(const j of l){const T=oo(j.route,I);if(T){P={context:T,resolver:j};break}}if(P){const j=so(P.resolver,P.context),T=ao(P.resolver,P.context);if(j){const A=new AbortController,k={perspective:"drafts",signal:A.signal};return d.fetch(j,T,k).then(R=>x(R,I)).catch(R=>{R instanceof Error&&R.name==="AbortError"||(b({document:void 0,path:I.pathname}),v.current=void 0)}),()=>{A.abort()}}}}b(void 0),v.current=void 0},e[9]=d,e[10]=x,e[11]=a,e[12]=m,e[13]=l,e[14]=_):_=e[14];let w;return e[15]!==d||e[16]!==a||e[17]!==m||e[18]!==l?(w=[d,a,m,l],e[15]=d,e[16]=a,e[17]=m,e[18]=l,e[19]=w):w=e[19],f.useEffect(_,w),g}function co(n){const[e]=n;return e==="preview"}const lo=vn(kt(),bn(1));yn(lo);const uo=/^([\w-]+):(0|[1-9][0-9]*)$/,po=/^([\w-]+):([0-9]+),([0-9]+)$/,mo=/^([\w-]+):([\w-]+)$/;function ho(n){const e=[];for(const t of n.split(".")){const s=uo.exec(t);if(s){e.push(s[1],Number(s[2]));continue}const r=po.exec(t);if(r){e.push(r[1],[Number(r[2]),Number(r[3])]);continue}const a=mo.exec(t);if(a){e.push(a[1],{_key:a[2]});continue}e.push(t)}return e}const Yt=vn(kt(),bn(1));zr({origin:Yt,href:Yt,data:yn(ts(kt(),rs()))});function fo(n){var t;if(n===void 0)return;const e=(t=decodeURIComponent(n))==null?void 0:t.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function go(n){if(n!==void 0)return dn.toString(ho(decodeURIComponent(n)))}function vo(n){return{id:fo(n.id),path:go(n.path),type:n.type}}function Ye(n){return Object.fromEntries(Object.entries(n).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}function yo({initialPreviewUrl:n,routerNavigate:e,routerState:t,routerSearchParams:s,frameStateRef:r}){const a=f.useMemo(()=>{const{id:d,path:h,type:m}=vo(t);return{id:d,type:m,path:h,preview:s.preview||`${n.pathname}${n.search}`,perspective:s.perspective,viewport:s.viewport,inspect:s.inspect,rev:s.rev,since:s.since,template:s.template,templateParams:s.templateParams,view:s.view,pathKey:s.pathKey,instruction:s.instruction,comment:s.comment,changesInspectorTab:s.changesInspectorTab}},[t,s,n]),o=f.useMemo(()=>Ye({inspect:a.inspect,path:a.path,rev:a.rev,since:a.since,template:a.template,templateParams:a.templateParams,view:a.view,pathKey:a.pathKey,instruction:a.instruction,comment:a.comment,changesInspectorTab:a.changesInspectorTab}),[a.changesInspectorTab,a.comment,a.inspect,a.instruction,a.path,a.pathKey,a.rev,a.since,a.template,a.templateParams,a.view]),i=f.useMemo(()=>Ye({perspective:a.perspective,preview:a.preview,viewport:a.viewport}),[a.perspective,a.preview,a.viewport]),l=f.useRef(t);f.useEffect(()=>{l.current=t},[t]);const[c,p]=f.useState([t]);return{navigate:f.useCallback((d,h={},m)=>{d.id&&(d.id=st(d.id));const{_searchParams:g,...b}=l.current,v=(g||[]).reduce((w,[E,C])=>(w[E]=C,w),{}),y=Ye({...b,...d}),x=Ye({...v,...h});b.id!==y.id&&(delete x.template,delete x.templateParams),y._searchParams=Object.entries(x).reduce((w,[E,C])=>[...w,[E,C]],[]);const _=m??x.preview===r.current.url;p(w=>[...w,y]),e(y,{replace:_})},[e,r]),navigationHistory:c,params:a,searchParams:i,structureParams:o}}const bo=n=>{const e=L.c(10),[t,s]=f.useState(xo);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=d=>{const h=window.open(d,"_blank");h&&s(m=>new Set(m).add(h))},e[0]=r):r=e[0];const a=r;let o,i;e[1]!==n||e[2]!==t?(o=()=>{const d=[];if(t.size&&n)for(const h of t)h&&"closed"in h&&!h.closed&&d.push(n.addTarget(h));return()=>{d.forEach(wo)}},i=[n,t],e[1]=n,e[2]=t,e[3]=o,e[4]=i):(o=e[3],i=e[4]),f.useEffect(o,i);let l,c;e[5]!==t?(l=()=>{if(t.size){const d=setInterval(()=>{const h=new Set;for(const m of t)m&&"closed"in m&&m.closed&&h.add(m);h.size&&s(m=>{const g=new Set(m);for(const b of h)g.delete(b);return g})},Wr);return()=>{clearInterval(d)}}},c=[t],e[5]=t,e[6]=l,e[7]=c):(l=e[6],c=e[7]),f.useEffect(l,c);let p;return e[8]!==t?(p={popups:t,open:a},e[8]=t,e[9]=p):p=e[9],p};function xo(){return new Set}function wo(n){return n()}function Po(n,e,t,s,r){var d,h;const a=Be({apiVersion:He}),o=pn(),i=((d=o==null?void 0:o.activeWorkspace)==null?void 0:d.basePath)||"/",l=((h=o==null?void 0:o.activeWorkspace)==null?void 0:h.name)||"default",c=_o(e,i,l,s),p=jo(r&&typeof n=="object"||typeof n=="function",c);return mn(async()=>{if(typeof n=="string"){const g=new URL(n,location.origin);let b=g;try{if(s){const v=new URL(s,g);v.origin===g.origin&&(b=v)}}catch{}return location.origin===b.origin&&(b.pathname.startsWith(`${i}/`)||b.pathname===i)?g:b}const m=await(typeof n=="object"?Ns(n):n)({client:a,previewUrlSecret:p,studioPreviewPerspective:Nt(t),previewSearchParam:s,studioBasePath:i});return new URL(m,location.origin)},[...c,p])}const So=Symbol("sanity/presentation/resolveUUID");function _o(n,e,t,s){const r=L.c(12);let a;r[0]!==s?(a=()=>s||"",r[0]=s,r[1]=a):a=r[1];const[o,i]=f.useState(a),l=f.useRef(0);let c,p;r[2]!==o||r[3]!==s?(c=()=>{if(o&&s)return window.clearTimeout(l.current),()=>{l.current=window.setTimeout(()=>{i("")},100)}},p=[o,s],r[2]=o,r[3]=s,r[4]=c,r[5]=p):(c=r[4],p=r[5]),f.useEffect(c,p);const d=It();let h;const m=d==null?void 0:d.id;let g;return r[6]!==e||r[7]!==o||r[8]!==m||r[9]!==n||r[10]!==t?(g=["sanity/presentation",e,t,n,m,So,o],r[6]=e,r[7]=o,r[8]=m,r[9]=n,r[10]=t,r[11]=g):g=r[11],h=g,h}function jo(n,e){const t=L.c(10);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={apiVersion:He},t[0]=s):s=t[0];const r=Be(s),a=It(),[o,i]=f.useState("");let l;t[1]!==r||t[2]!==(a==null?void 0:a.id)||t[3]!==e||t[4]!==n||t[5]!==o?(l=n?mn(async()=>await Ws(r,"@sanity/presentation",typeof window>"u"?"":location.href,a==null?void 0:a.id),[...e,o]):null,t[1]=r,t[2]=a==null?void 0:a.id,t[3]=e,t[4]=n,t[5]=o,t[6]=l):l=t[6];const c=l;let p,d;return t[7]!==c?(p=()=>{if(!c)return;const h=setTimeout(()=>{f.startTransition(()=>i(c.expiresAt.toString()))},c.expiresAt.getTime()-Date.now());return()=>clearTimeout(h)},d=[c],t[7]=c,t[8]=p,t[9]=d):(p=t[8],d=t[9]),f.useEffect(p,d),(c==null?void 0:c.secret)||null}function ft(){const n=L.c(4);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,n[0]=e):e=n[0];const[t,s]=f.useState(e);let r;e:{const c=Array.from(t.values());if(c.find(Co)){r="connected";break e}const p=c.filter(Ro);if(p.length){r=p.some(Eo)?"connecting":"reconnecting";break e}r="idle"}const a=r;let o;n[1]===Symbol.for("react.memo_cache_sentinel")?(o=c=>{s(p=>{var h;const d=new Map(p);if(c.status==="disconnected")d.delete(c.connection);else{const m=((h=d.get(c.connection))==null?void 0:h.hasConnected)||c.status==="connected",g=c.status==="handshaking"?"connecting":c.status;d.set(c.connection,{status:g,hasConnected:m})}return d})},n[1]=o):o=n[1];const i=o;let l;return n[2]!==a?(l=[a,i],n[2]=a,n[3]=l):l=n[3],l}function Eo(n){const{hasConnected:e}=n;return!e}function Ro(n){const{status:e}=n;return e==="connecting"}function Co(n){const{status:e}=n;return e==="connected"}const To=f.lazy(()=>Ae(()=>import("./LiveQueries-KFjmuPtB.js"),__vite__mapDeps([2,1,3]))),Io=f.lazy(()=>Ae(()=>import("./PostMessageDocuments-qV5_FHze.js"),__vite__mapDeps([4,1]))),ko=f.lazy(()=>Ae(()=>import("./PostMessageRefreshMutations-BGIs10LM.js"),__vite__mapDeps([5,1]))),Ao=f.lazy(()=>Ae(()=>import("./PostMessagePerspective-DkkrhKVb.js"),__vite__mapDeps([6,1]))),Mo=f.lazy(()=>Ae(()=>import("./PostMessagePreviewSnapshots-DZ3eg1xV.js"),__vite__mapDeps([7,1]))),$o=f.lazy(()=>Ae(()=>import("./PostMessageSchema-CQI6LTVo.js"),__vite__mapDeps([8,1]))),Oo=f.lazy(()=>Ae(()=>import("./PostMessageTelemetry-BUsab0tL.js"),__vite__mapDeps([9,1]))),Lo=pe(ne)`
  overflow-x: auto;
`;function zo(n){var Me,xe,ze,we,Pe;const{canCreateUrlPreviewSecrets:e,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:s,tool:r,vercelProtectionBypass:a}=n,o=(Me=r.options)==null?void 0:Me.components,i=(xe=r.options)==null?void 0:xe.previewUrl,l=r.name||rr,{unstable_navigator:c,unstable_header:p}=o||{},{navigate:d,state:h}=Rt(),m=cn(Object.fromEntries(h._searchParams||[])),{perspectiveStack:g,selectedPerspectiveName:b="drafts",selectedReleaseId:v}=sr(),y=v?g:b,x=Po(i||"/",l,y,m.preview||null,e),_=f.useMemo(()=>i&&typeof i=="object"&&"draftMode"in i&&i.draftMode?(console.warn("previewUrl.draftMode is deprecated, use previewUrl.previewMode instead"),i.draftMode.shareAccess!==!1):i&&typeof i=="object"&&"previewMode"in i&&i.previewMode?i.previewMode.shareAccess!==!1:!1,[i]),[w]=f.useState(()=>{var q;const $=(q=r.options)==null?void 0:q.devMode;return typeof $=="function"?$():typeof $=="boolean"?$:typeof window<"u"&&window.location.hostname==="localhost"}),E=f.useMemo(()=>x.origin,[x.origin]),C=f.useRef(null),[S,I]=f.useState(),[P,j]=f.useState(null),T=f.useRef({title:void 0,url:void 0}),{navigate:A,navigationHistory:k,params:R,searchParams:M,structureParams:N}=yo({initialPreviewUrl:x,routerNavigate:d,routerState:h,routerSearchParams:m,frameStateRef:T}),O=f.useMemo(()=>Cn(A,50),[A]),[z,D]=f.useReducer(ar,{},or),X=f.useMemo(()=>R.viewport?"mobile":"desktop",[R.viewport]),[V,Y]=ro(y,T),re=ir(),ie=cr(),W=io({navigate:A,navigationHistory:k,path:R.preview,previewUrl:(ze=r.options)==null?void 0:ze.previewUrl,resolvers:(Pe=(we=r.options)==null?void 0:we.resolve)==null?void 0:Pe.mainDocuments}),[Z,ce]=ft(),[le,B]=ft(),[F,H]=ft(),{open:K}=bo(S),se=z.iframe.status==="loading";f.useEffect(()=>{var U;const $=(U=C.current)==null?void 0:U.contentWindow;if(!$||se)return;const q=xs({targetOrigin:E});return q.addTarget($),I(q),()=>{q.destroy(),I(void 0)}},[E,se]);const G=ln(($,q,U)=>O($,q,U));f.useEffect(()=>{if(!S)return;const $=S.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},nt().provide({actors:Bt()}));$.on("visual-editing/focus",U=>{"id"in U&&G({type:U.type,id:U.id,path:U.path})}),$.on("visual-editing/navigate",U=>{const{title:zn,url:Ge}=U;if(T.current.url!==Ge)try{const[Wn,Nn]=Ge.split("?"),Qe=new URLSearchParams(Nn);Qe.delete(De),Qe.delete(_t),G({},{preview:`${Wn}${Qe.size>0?"?":""}${Qe}`})}catch{G({},{preview:Ge})}T.current={title:zn,url:Ge}}),$.on("visual-editing/meta",U=>{T.current.title=U.title}),$.on("visual-editing/toggle",U=>{D({type:lr,enabled:U.enabled})}),$.on("visual-editing/documents",U=>{Y("visual-editing",U.perspective,U.documents)}),$.on("visual-editing/refreshing",U=>{U.source==="manual"?clearTimeout(be.current):U.source==="mutation"&&D({type:Ut})}),$.on("visual-editing/refreshed",()=>{D({type:un})}),$.onStatus(ce);const q=$.start();return j($),()=>{q(),j(null)}},[S,Y,ce,E]),f.useEffect(()=>{if(!S)return;const $=S.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},nt().provide({actors:Bt()}));return $.onStatus(H),$.on("preview-kit/documents",q=>{q.projectId===re&&q.dataset===ie&&Y("preview-kit",q.perspective,q.documents)}),$.start()},[S,ie,re,Y,H,E]);const ee=f.useCallback($=>{O({path:dn.toString($)},{},!0)},[O]),J=f.useCallback($=>{const q=new URL($,x.origin),U=q.pathname+q.search;q.origin===x.origin&&U!==R.preview&&O({},{preview:U})},[x,R,O]),ae=f.useCallback($=>{O({},$)},[O]);f.useEffect(()=>{R.id&&R.path?P==null||P.post("presentation/focus",{id:R.id,path:R.path}):P==null||P.post("presentation/blur")},[R.id,R.path,P]),f.useEffect(()=>{T.current.url&&R.preview&&T.current.url!==R.preview&&(T.current.url=R.preview,Z!=="connected"&&C.current?C.current.src=`${E}${R.preview}`:P==null||P.post("presentation/navigate",{url:R.preview,type:"replace"}))},[Z,E,R.preview,P]);const oe=f.useCallback(()=>P==null?void 0:P.post("presentation/toggle-overlay"),[P]),[he,fe]=f.useState(null);f.useEffect(()=>{const $=U=>{Jt(U)&&oe()},q=U=>{Jt(U)&&oe(),No(["mod","\\"],U)&&oe()};return window.addEventListener("keydown",q),window.addEventListener("keyup",$),()=>{window.removeEventListener("keydown",q),window.removeEventListener("keyup",$)}},[oe]);const[_e,me]=f.useState(null),[{navigatorEnabled:je,toggleNavigator:ge},Ee]=Ma({unstable_navigator:c}),be=f.useRef(void 0),Re=f.useCallback($=>{if(D({type:Ut}),P){be.current=window.setTimeout($,300),P.post("presentation/refresh",{source:"manual",livePreviewEnabled:F==="connected"||le==="connected"});return}$()},[le,F,P]),Le=ur(),Ce=f.useCallback(({id:$,type:q,path:U})=>{if(T.current.url)return{title:T.current.title||T.current.url,name:"edit",params:{id:$,path:U,type:q,inspect:pr,workspace:Le.name,mode:dr,preview:R.preview}}},[R.preview,Le.name]),Te=f.useCallback($=>{O({},{viewport:$==="desktop"?void 0:"mobile"},!0)},[O]);return u.jsxs(u.Fragment,{children:[u.jsx(Wa,{devMode:w,name:l,navigate:O,params:R,searchParams:M,structureParams:N,children:u.jsx(ka,{navigate:O,children:u.jsx(za,{params:R,children:u.jsx(Vs,{comlink:P,children:u.jsx(Lo,{height:"fill",children:u.jsxs(ta,{children:[u.jsx(Ee,{}),u.jsx(zt,{id:"preview",minWidth:325,defaultSize:je?50:75,order:3,children:u.jsx(ne,{direction:"column",flex:1,height:"fill",ref:me,children:u.jsx(mr,{element:_e,children:u.jsx(On,{canSharePreviewAccess:_,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:s,dispatch:D,header:p,iframe:z.iframe,initialUrl:x,loadersConnection:le,navigatorEnabled:je,onPathChange:J,onRefresh:Re,openPopup:K,overlaysConnection:Z,previewUrl:R.preview,perspective:y,ref:C,setViewport:Te,targetOrigin:E,toggleNavigator:ge,toggleOverlay:oe,viewport:X,visualEditing:z.visualEditing,vercelProtectionBypass:a},E)})})}),u.jsx(Ia,{documentId:R.id,documentsOnPage:V,documentType:R.type,getCommentIntent:Ce,mainDocumentState:W,onFocusPath:ee,onStructureParams:ae,searchParams:M,setDisplayedDocument:fe,structureParams:N})]})})})})})}),u.jsxs(f.Suspense,{children:[S&&u.jsx(To,{controller:S,perspective:y,liveDocument:he,onDocumentsOnPage:Y,onLoadersConnection:B}),P&&R.id&&R.type&&u.jsx(ko,{comlink:P,id:R.id,type:R.type,loadersConnection:le,previewKitConnection:F}),P&&u.jsx($o,{comlink:P,perspective:y}),P&&V.length>0&&u.jsx(Mo,{comlink:P,perspective:y,refs:V}),P&&u.jsx(Io,{comlink:P,perspective:y}),P&&u.jsx(qs,{comlink:P}),P&&u.jsx(Ao,{comlink:P,perspective:y}),P&&u.jsx(Oo,{comlink:P})]})]})}function Jt(n){return n.key==="Alt"}const Wo=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Zt={alt:"altKey",ctrl:"ctrlKey",mod:Wo?"metaKey":"ctrlKey",shift:"shiftKey"};function No(n,e){return n.every(t=>Zt[t]?e[Zt[t]]:e.key===t.toUpperCase())}function Do(){const n=L.c(7);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:He},n[0]=e):e=n[0];const t=Be(e),[s,r]=f.useReducer(Uo,"loading"),[a,o]=f.useState(null);let i,l;n[1]!==t?(i=()=>{const p=Ds(t,d=>{o(d),r()});return()=>p()},l=[t],n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),f.useEffect(i,l);let c;return n[4]!==s||n[5]!==a?(c=[a,s],n[4]=s,n[5]=a,n[6]=c):c=n[6],c}function Uo(){return"ready"}function qo(n){const e=L.c(17),{t}=ve(ye),{previewUrl:s}=n.tool.options??{},{push:r}=an(),a=typeof s=="object"||typeof s=="function",o=nr(),[i,l]=f.useState(null),[c,p]=f.useState(null),[d,h]=f.useState(null),[m,g]=f.useState(null);let b,v;e[0]!==o||e[1]!==a?(b=()=>{if(!a)return;const j=o.checkDocumentPermission("create",{_id:$e,_type:Ue}).subscribe(l),T=o.checkDocumentPermission("update",{_id:$e,_type:Ue}).subscribe(p),A=o.checkDocumentPermission("read",{_id:$e,_type:Ue}).subscribe(h),k=o.checkDocumentPermission("create",{_id:`drafts.${rn()}`,_type:sn}).subscribe(g);return()=>{j.unsubscribe(),T.unsubscribe(),A.unsubscribe(),k.unsubscribe()}},v=[o,a],e[0]=o,e[1]=a,e[2]=b,e[3]=v):(b=e[2],v=e[3]),f.useEffect(b,v);const y=m==null?void 0:m.granted;let x,_;e[4]!==y||e[5]!==r||e[6]!==t||e[7]!==a?(x=()=>{if(!a||y!==!1)return;const j=requestAnimationFrame(()=>r({closable:!0,status:"error",duration:3e4,title:t("preview-url-secret.missing-grants")}));return()=>cancelAnimationFrame(j)},_=[y,r,t,a],e[4]=y,e[5]=r,e[6]=t,e[7]=a,e[8]=x,e[9]=_):(x=e[8],_=e[9]),f.useEffect(x,_);const[w,E]=Do();if(E==="loading"||a&&(!i||typeof i.granted>"u"||!c||typeof c.granted>"u"||!m||!d||typeof d.granted>"u"||typeof m.granted>"u")){let j;return e[10]===Symbol.for("react.memo_cache_sentinel")?(j=u.jsx(on,{}),e[10]=j):j=e[10],j}const C=y===!0,S=(i==null?void 0:i.granted)===!0&&(c==null?void 0:c.granted)===!0,I=(d==null?void 0:d.granted)===!0;let P;return e[11]!==n||e[12]!==C||e[13]!==S||e[14]!==I||e[15]!==w?(P=u.jsx(zo,{...n,vercelProtectionBypass:w,canCreateUrlPreviewSecrets:C,canToggleSharePreviewAccess:S,canUseSharedPreviewAccess:I}),e[11]=n,e[12]=C,e[13]=S,e[14]=I,e[15]=w,e[16]=P):P=e[16],P}const Bo=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"}));export{Bo as P,Bt as a,nt as c};
